<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
<script>
	/*
	Experimental:
	This script is an experimental implementation of Qoopido.demand. It is approx. 2.5 times bigger than the usual script but is able to cache demand itself, but without checking for quota exceeded!

	(function(url, main, settings) {
		(function(window, document, type, name, localStorage, JSON, target, script, version, prefix, keyState, keyValue, state, xhr){
			target = document.getElementsByTagName(type)[0];
			script = document.createElement(type);

			window[name] = { url: url, main: main, settings: settings };

			if(localStorage) {
				version  = settings.version ||Â '1.0.0';
				prefix   = '[' + name + ']',
				keyState = prefix + '[state]',
				keyValue = prefix + '[value]',
				state    = JSON.parse(localStorage.getItem(keyState));

				script.async = script.defer = 1;

				if(!state || state.version !== version || state.url !== url) {
					xhr        = 'XDomainRequest' in window ? new window.XDomainRequest() : new XMLHttpRequest();
					xhr.onload = function() { script.text = xhr.responseText; localStorage.setItem(keyState, JSON.stringify({ version: version, url: url })); localStorage.setItem(keyValue, xhr.responseText) };

					xhr.open('GET', url, true);
					xhr.send();
				} else {
					script.text = localStorage.getItem(keyValue);
				}
			} else {
				script.src = url;
			}

			target.parentNode.insertBefore(script, target);
		}(window, document, 'script', 'demand', localStorage, JSON))
	}('https://rawgit.com/dlueth/qoopido.demand/release/1.0.4/dist/demand.js', 'app/main', { base: 'https://rawgit.com/dlueth/qoopido.demand/release/1.0.4/demo', version: '1.0.4' }));
	*/

	(function(url, main, settings) {
		(function(window, document, type, target, script){
			target = document.getElementsByTagName(type)[0];
			script = document.createElement(type);

			window.demand = { url: url, main: main, settings: settings };

			script.async = script.defer = 1;
			script.src   = url;

			target.parentNode.insertBefore(script, target);
		}(window, document, 'script'))
	}('https://rawgit.com/dlueth/qoopido.demand/master/dist/demand.js', 'app/main', { base: 'https://rawgit.com/dlueth/qoopido.demand/master/demo', version: '1.0.4' }));
</script>
</body>
</html>