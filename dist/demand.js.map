{"version":3,"sources":["demand.js","../src/validator/isTypeOf.js","../src/validator/isObject.js","../src/validator/isPositive.js","../src/function/iterate.js","../src/class/Descriptor.js","../src/validator/isInstanceOf.js","../src/function/getTimestamp.js","../src/function/resolveUrl.js","../src/function/resolveId.js","../src/class/failure.js","../src/class/loader.js","../src/validator/isArray.js","../src/function/log.js","../src/function/hash.js","../src/class/Failure.js","../src/constants.js","../src/shortcuts.js","../src/function/merge.js","../src/singleton/uuid.js","../src/function/defer.js","../src/singleton/event.js","../src/function/escapeRegex.js","../src/variables.js","../src/function/resolvePath.js","../src/singleton/cache.js","../src/class/pledge.js","../src/class/registry.js","../src/class/dependency.js","../src/class/pattern.js","../src/class/xhr.js","../src/demand.js","../src/provide.js","../src/class/queue.js","../src/class/processor.js","../src/handler/module.js","../src/handler/bundle.js"],"names":["global","document","options","setTimeout","clearTimeout","validatorIsTypeOf","object","type","validatorIsObject","STRING_OBJECT","validatorIsPositive","value","STRING_NUMBER","isFinite","Math","floor","functionIterate","callback","context","property","properties","Object","keys","i","UNDEFINED","call","FALSE","ClassDescriptor","writable","configurable","enumerable","__proto__","NULL","validatorIsInstanceOf","module","functionGetTimestamp","Date","functionResolveUrl","url","linkElement","href","functionResolveId","uri","parameter","match","regexMatchParameter","settings","handler","functionResolvePath","ClassFailure","message","stack","this","arrayPrototypeSlice","ClassLoader","dependency","resolve","response","validate","source","singletonEvent","emit","EVENT_POST_REQUEST","deferred","reject","ERROR_LOAD","id","status","load","location","pattern","process","path","EVENT_PRE_REQUEST","ClassXhr","then","regexIsAbsoluteUri","test","matches","weight","validatorIsArray","objectPrototypeToString","functionLog","error","console","STRING_UNDEFINED","toString","functionHash","input","length","charCodeAt","assignModule","factory","provide","queue","processor","cache","timeout","modules","DEMAND_ID","PROVIDE_ID","PATH_ID","MODULE_PREFIX","MODULE_PREFIX_HANDLER","MODULE_PREFIX_FUNCTION","MODULE_PREFIX_VALIDATOR","MOCK_PREFIX","undefined","TRUE","STRING_STRING","STRING_BOOLEAN","STRING_FUNCTION","FUNCTION_EMPTY","EVENT_PREFIX","EVENT_POSTFIX","EVENT_CONFIGURE","EVENT_PRE_CONFIGURE","EVENT_POST_CONFIGURE","EVENT_CACHE","EVENT_CACHE_MISS","EVENT_CACHE_HIT","EVENT_CACHE_CLEAR","EVENT_CACHE_EXCEED","EVENT_PRE_CACHE","EVENT_POST_CACHE","EVENT_REQUEST","EVENT_PROCESS","EVENT_PRE_PROCESS","EVENT_POST_PROCESS","EVENT_QUEUE","EVENT_QUEUE_ENQUEUE","EVENT_QUEUE_DEQUEUE","ERROR_PROVIDE","ERROR_RESOLVE","ERROR_PROVIDE_ANONYMOUS","arrayPrototype","Array","prototype","slice","arrayPrototypeConcat","concat","objectPrototype","create","defineProperty","getOwnPropertyNames","getOwnPropertyDescriptor","Function","createElement","functionMerge","mergeProperties","targetPropertyIsObject","targetProperty","target","arguments","singletonUuid","randomize","character","r","random","Uuid","objectDefineProperty","regex","RegExp","storage","generate","result","replace","set","uuid","functionDefer","element","fallback","hasSetImmediate","fn","MutationObserver","observe","attributes","setAttribute","onMessage","event","data","addEventListener","postMessage","onreadystatechange","parentNode","removeChild","body","appendChild","setImmediate","Event","regexMatchEvent","listener","filter","item","pointer","apply","on","events","split","shift","push","functionEscapeRegex","regexMatchRegex","regexMatchSourcemap","regexMatchBaseUrl","regexMatchInternal","regexIsAbsolutePath","singletonCache","JSON","cachingEnabled","indexOf","state","Cache","STORAGE_PREFIX","STORAGE_SUFFIX_STATE","STORAGE_SUFFIX_VALUE","regexMatchState","supportsLocalStorage","localStorage","exception","supportsRemainingSpace","clear","get","parse","getItem","version","expires","lifetime","spaceBefore","remainingSpace","setItem","stringify","Error","key","removeItem","ClassDependency","all","expired","ClassPledge","handle","PLEDGE_RESOLVED","PLEDGE_REJECTED","PLEDGE_PENDING","pledge","index","resolved","count","check","rejected","total","executor","self","bind","catch","always","alwaysListener","resolveListener","rejectListener","defer","isPending","isResolved","isRejected","pledges","race","ClassRegistry","traverse","depth","indention","join","register","mock","registry","scopedDemand","demand","list","pending","ClassPattern","regexMatchTrailingSlash","current","XMLHttpRequest","checkState","readyState","abort","XDomainRequest","boundCheckState","xhr","ontimeout","onerror","onabort","onprogress","onload","responseText","getResponseHeader","open","send","dependencies","configure","temp","base","min","max","onPreRequest","onPostRequest","onPreProcess","enqueue","delay","isFunction","definition","ClassQueue","dequeue","ClassProcessor","handlerModule","getElementsByTagName","regexMatchType","replacement","exec","protocol","host","script","async","text","handlerBundle","/demand","main"],"mappings":"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","file":"demand.js","sourcesContent":["/* global\n global, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tMODULE_PREFIX, MODULE_PREFIX_HANDLER, MODULE_PREFIX_VALIDATOR, MODULE_PREFIX_FUNCTION, TRUE,\n\tvalidatorIsTypeOf, validatorIsArray, validatorIsObject, validatorIsInstanceOf,\n\tfunctionResolveUrl, functionMerge, functionIterate, functionDefer, functionHash,\n \tClassQueue, ClassProcessor, ClassPledge, ClassXhr, ClassFailure,\n\tsingletonUuid,\n\thandlerModule, handlerBundle\n*/\n\n/*eslint no-unused-vars: [2, { \"vars\": \"local\", \"args\": \"none\" }]*/\n(function(global, document, options, setTimeout, clearTimeout) {\n\t'use strict';\n\n\t/* eslint-disable no-unused-vars */\n\tvar settings = { cache: {}, timeout: 8000, pattern: {}, modules: {}, handler: 'module' },\n\t\tqueue, processor;\n\t/* eslint-enable no-unused-vars */\n\n\t//###require inheritance.js // @todo check if really required\n\t//=require demand.js\n\t//=require provide.js\n\t//=require function/hash.js\n\t//=require class/queue.js\n\t//=require class/processor.js\n\t//require validator/isInstanceOf.js\n\t//=require handler/module.js\n\t//=require handler/bundle.js\n\t//###require handler/bundle/genie.js\n\n\tqueue     = new ClassQueue();\n\tprocessor = new ClassProcessor(queue);\n\n\tfunction assignModule(id, factory) {\n\t\tprovide(id, function() { return factory; });\n\t}\n\n\tassignModule(MODULE_PREFIX_HANDLER + 'module', handlerModule);\n\tassignModule(MODULE_PREFIX_HANDLER + 'bundle', handlerBundle);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isTypeOf', validatorIsTypeOf);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isArray', validatorIsArray);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isObject', validatorIsObject);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'resolveUrl', functionResolveUrl);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isInstanceOf', validatorIsInstanceOf);\n\t//assignModule(MODULE_PREFIX_VALIDATOR + 'isPositive', validatorIsPositive);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'merge', functionMerge);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'iterate', functionIterate);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'hash', functionHash);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'defer', functionDefer);\n\tassignModule(MODULE_PREFIX + 'uuid', singletonUuid);\n\tassignModule(MODULE_PREFIX + 'pledge', ClassPledge);\n\tassignModule(MODULE_PREFIX + 'queue', ClassQueue);\n\tassignModule(MODULE_PREFIX + 'xhr', ClassXhr);\n\tassignModule(MODULE_PREFIX + 'failure', ClassFailure);\n\n\tdemand.configure({ cache: TRUE, base: '/', pattern: { '/demand': functionResolveUrl(((options && options.url) || location.href) + '/../').slice(0, -1)} });\n\n\tif(options) {\n\t\toptions.settings && demand.configure(options.settings);\n\n\t\toptions.main && demand(options.main);\n\t}\n}(this, document, 'demand' in this && demand, setTimeout, clearTimeout));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\n/**\n * isTypeOf\n *\n * Check whether a given object is of specified type\n *\n * @param object\n * @param {string} type\n *\n * @return {boolean}\n */\n\nfunction validatorIsTypeOf(object, type) {\n\treturn typeof object === type;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_OBJECT,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\n/**\n * isObject\n *\n * Check whether a given object is of type object\n *\n * @param object\n *\n * @return {boolean}\n */\n\nfunction validatorIsObject(object) {\n\treturn object && validatorIsTypeOf(object, STRING_OBJECT);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_NUMBER,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\n/**\n * isPositive\n *\n * Check whether a given value is a positive integer\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsPositive(value) {\n\treturn validatorIsTypeOf(value, STRING_NUMBER) && isFinite(value) && Math.floor(value) === value && value >= 0;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tUNDEFINED, FALSE\n*/\n\n//=require constants.js\n\n/**\n * iterate\n *\n * Iterate over enumerable & own properties of a given\n * object and pass current property as well as its value\n * to a callback function\n *\n * @param {object} object\n * @param {function} callback\n * @param context\n *\n * @return {object}\n */\n\nfunction functionIterate(object, callback, context) {\n\tvar properties = Object.keys(object),\n\t\ti = 0, property;\n\n\tfor(; (property = properties[i]) !== UNDEFINED; i++) {\n\t\tif(callback.call(context, property, object[property]) === FALSE) {\n\t\t\tbreak;\n\t\t}\n\t}\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tNULL\n*/\n\n//=require constants.js\n\nfunction ClassDescriptor(value, writable, configurable, enumerable) {\n\treturn {\n\t\t__proto__:    NULL,\n\t\tvalue:        value,\n\t\tenumerable:   !!enumerable,\n\t\tconfigurable: !!configurable,\n\t\twritable:     !!writable\n\t};\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\n/**\n * isInstanceOf\n *\n * Check whether a given object is an instance of specified type\n *\n * @param object\n * @param module\n *\n * @return {boolean}\n */\nfunction validatorIsInstanceOf(object, module) {\n\treturn object instanceof module;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\nfunction functionGetTimestamp() {\n\treturn +new Date();\n}\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tlinkElement\n*/\n\n//=require shortcuts.js\n\nfunction functionResolveUrl(url) {\n\tlinkElement.href = url;\n\n\treturn linkElement.href;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tregexMatchParameter,\n\tfunctionResolvePath\n*/\n\n//=require variables.js\n//=require function/resolvePath.js\n\nfunction functionResolveId(uri, context) {\n\tvar parameter = uri.match(regexMatchParameter)\n\n\treturn ((parameter && parameter[1]) ? 'mock:' : '') + ((parameter && parameter[3]) || settings.handler) + '!' + functionResolvePath(uri, context);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tDEMAND_ID,\n\tarrayPrototypeSlice\n*/\n\n//=require constants.js\n//=require shortcuts.js\n\nfunction ClassFailure(message, module, stack) {\n\tthis.message = message;\n\t\t\n\tmodule && (this.module = module);\n\tstack && (this.stack = arrayPrototypeSlice.call(stack));\n}\n\t\nClassFailure.prototype = {\n\t/* only for reference\n\t message: NULL,\n\t module:  NULL,\n\t stack:   NULL,\n\t */\n\ttoString: function() {\n\t\tvar self   = this,\n\t\t\tresult = DEMAND_ID + ': ' + self.message + ' ' + (self.module ? '\"' + self.module + '\"' : '');\n\n\t\tif(self.stack) {\n\t\t\tresult = ClassFailure.traverse(self.stack, result, 1);\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n};\n\t\nClassFailure.traverse = function(stack, value, depth) {\n\tvar indention = new Array(depth + 1).join(' '),\n\t\ti = 0, item;\n\t\t\n\tfor(; item = stack[i]; i++) {\n\t\tvalue += '\\n' + indention + '> ' + item.message + ' ' + (item.module ? '\"' + item.module + '\"' : '');\n\t\t\t\n\t\tif(item.stack) {\n\t\t\tvalue = ClassFailure.traverse(item.stack, value, depth + 1);\n\t\t}\n\t}\n\t\t\n\treturn value;\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n \tEVENT_PRE_REQUEST, EVENT_POST_REQUEST, ERROR_LOAD,\n\tregexIsAbsoluteUri,\n\tfunctionIterate, functionResolveUrl,\n\tClassXhr, ClassFailure,\n\tsingletonEvent\n*/\n\n//=require constants.js\n//=require variables.js\n//=require function/resolveUrl.js\n//=require function/iterate.js\n//=require singleton/event.js\n//=require class/xhr.js\n//=require class/failure.js\n\nfunction ClassLoader(dependency) {\n\tvar pattern;\n\n\tfunction resolve(response, type) {\n\t\tif(!dependency.handler.validate || dependency.handler.validate(type)) {\n\t\t\tdependency.source = response;\n\n\t\t\tsingletonEvent.emit(EVENT_POST_REQUEST, dependency.type, dependency);\n\t\t} else {\n\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (content-type)', dependency.id));\n\t\t}\n\t}\n\n\tfunction reject(status) {\n\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + (status ? ' (status)' : ''), dependency.id));\n\t}\n\n\tfunction load(location) {\n\t\tlocation       = location || 0;\n\t\tdependency.url = pattern ? functionResolveUrl(pattern.process(dependency.path, location)) : dependency.path;\n\n\t\tsingletonEvent.emit(EVENT_PRE_REQUEST, dependency.type, dependency);\n\n\t\tnew ClassXhr(dependency.url).then(\n\t\t\tresolve,\n\t\t\t(\n\t\t\t\tpattern ?\n\t\t\t\tfunction() {\n\t\t\t\t\tlocation++;\n\n\t\t\t\t\tif(pattern.location[location]) {\n\t\t\t\t\t\tload(location);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t:\n\t\t\t\treject\n\t\t\t)\n\t\t);\n\t}\n\n\tif(!regexIsAbsoluteUri.test(dependency.path)) {\n\t\tfunctionIterate(settings.pattern, function(property, value) {\n\t\t\tvalue.matches(dependency.path) && (!pattern || pattern.weight < value.weight) && (pattern = value);\n\t\t});\n\t}\n\n\tload();\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tobjectPrototypeToString\n*/\n\n//=require shortcuts.js\n\n/**\n * isArray\n *\n * Check whether a given value is of type array\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsArray(value) {\n\treturn objectPrototypeToString.call(value) === '[object Array]';\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_UNDEFINED,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\nfunction functionLog(error) {\n\t/* eslint-disable no-console */\n\tif(!validatorIsTypeOf(console, STRING_UNDEFINED)) {\n\t\tconsole.error(error.toString());\n\t}\n\t/* eslint-enable no-console */\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\n/**\n * hash\n *\n * Generate a hash for a given string\n *\n * @param {string} input\n *\n * @return {number}\n */\nfunction functionHash(input){\n\tvar value = 5381,\n\t\ti     = input.length;\n\n\twhile(i) {\n\t\tvalue = (value * 33) ^ input.charCodeAt(--i);\n\t}\n\n\treturn value >>> 0;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tDEMAND_ID,\n\tarrayPrototypeSlice\n*/\n\n//=require constants.js\n//=require shortcuts.js\n\nfunction ClassFailure(message, module, stack) {\n\tthis.message = message;\n\t\t\n\tmodule && (this.module = module);\n\tstack && (this.stack = arrayPrototypeSlice.call(stack));\n}\n\t\nClassFailure.prototype = {\n\t/* only for reference\n\t message: NULL,\n\t module:  NULL,\n\t stack:   NULL,\n\t */\n\ttoString: function() {\n\t\tvar self   = this,\n\t\t\tresult = DEMAND_ID + ': ' + self.message + ' ' + (self.module ? '\"' + self.module + '\"' : '');\n\n\t\tif(self.stack) {\n\t\t\tresult = ClassFailure.traverse(self.stack, result, 1);\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n};\n\t\nClassFailure.traverse = function(stack, value, depth) {\n\tvar indention = new Array(depth + 1).join(' '),\n\t\ti = 0, item;\n\t\t\n\tfor(; item = stack[i]; i++) {\n\t\tvalue += '\\n' + indention + '> ' + item.message + ' ' + (item.module ? '\"' + item.module + '\"' : '');\n\t\t\t\n\t\tif(item.stack) {\n\t\t\tvalue = ClassFailure.traverse(item.stack, value, depth + 1);\n\t\t}\n\t}\n\t\t\n\treturn value;\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\nvar DEMAND_ID               = 'demand',\n\tPROVIDE_ID              = 'provide',\n\tPATH_ID                 = 'path',\n\tMODULE_PREFIX           = '/' + DEMAND_ID + '/',\n\tMODULE_PREFIX_HANDLER   = MODULE_PREFIX + 'handler/',\n\tMODULE_PREFIX_FUNCTION  = MODULE_PREFIX + 'function/',\n\tMODULE_PREFIX_VALIDATOR = MODULE_PREFIX + 'validator/',\n\tMOCK_PREFIX             = 'mock:',\n\tNULL                    = null,\n\tUNDEFINED               = undefined,\n\tFALSE                   = false,\n\tTRUE                    = true,\n\tSTRING_UNDEFINED        = 'undefined',\n\tSTRING_STRING           = 'string',\n\tSTRING_BOOLEAN          = 'boolean',\n\tSTRING_OBJECT           = 'object',\n\tSTRING_FUNCTION         = 'function',\n\tSTRING_NUMBER           = 'number',\n\tFUNCTION_EMPTY          = function() {},\n\tEVENT_PREFIX            = 'pre',\n\tEVENT_POSTFIX           = 'post',\n\tEVENT_CONFIGURE         = 'Configure',\n\tEVENT_PRE_CONFIGURE     = EVENT_PREFIX + EVENT_CONFIGURE,\n\tEVENT_POST_CONFIGURE    = EVENT_POSTFIX + EVENT_CONFIGURE,\n\tEVENT_CACHE             = 'cache',\n\tEVENT_CACHE_MISS        = EVENT_CACHE + 'Miss',\n\tEVENT_CACHE_HIT         = EVENT_CACHE + 'Hit',\n\tEVENT_CACHE_CLEAR       = EVENT_CACHE + 'Clear',\n\tEVENT_CACHE_EXCEED      = EVENT_CACHE + 'Exceed',\n\tEVENT_PRE_CACHE         = EVENT_PREFIX + 'Cache',\n\tEVENT_POST_CACHE        = EVENT_POSTFIX + 'Cache',\n\tEVENT_REQUEST           = 'Request',\n\tEVENT_PRE_REQUEST       = EVENT_PREFIX + EVENT_REQUEST,\n\tEVENT_POST_REQUEST      = EVENT_POSTFIX + EVENT_REQUEST,\n\tEVENT_PROCESS           = 'Process',\n\tEVENT_PRE_PROCESS       = EVENT_PREFIX + EVENT_PROCESS,\n\tEVENT_POST_PROCESS      = EVENT_POSTFIX + EVENT_PROCESS,\n\tEVENT_QUEUE             = 'queue',\n\tEVENT_QUEUE_ENQUEUE     = EVENT_QUEUE + 'Enqueue',\n\tEVENT_QUEUE_DEQUEUE     = EVENT_QUEUE + 'Dequeue',\n\tERROR_LOAD              = 'error loading',\n\tERROR_PROVIDE           = 'error providing',\n\tERROR_RESOLVE           = 'error resolving',\n\tERROR_PROVIDE_ANONYMOUS = 'unspecified anonymous provide';","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\nvar arrayPrototype                 = Array.prototype,\n\tarrayPrototypeSlice            = arrayPrototype.slice,\n\tarrayPrototypeConcat           = arrayPrototype.concat,\n\tobjectPrototype                = Object.prototype,\n\tobjectPrototypeToString        = objectPrototype.toString,\n\tobjectCreate                   = Object.create,\n\tobjectDefineProperty           = Object.defineProperty,\n\tobjectGetOwnPropertyNames      = Object.getOwnPropertyNames,\n\tobjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,\n\tfunctionPrototype              = Function.prototype,\n\tlinkElement                    = document.createElement('a');","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tUNDEFINED,\n\tvalidatorIsObject,\n\tfunctionIterate\n*/\n\n//=require constants.js\n//=require validator/isObject.js\n//=require function/iterate.js\n\n/**\n * merge\n *\n * Merge two or more objects into the first one passed in\n *\n * @param {...object} object\n *\n * @return {object}\n */\nvar functionMerge = (function() {\n\tfunction mergeProperties(property, value) {\n\t\tvar targetProperty = this[property],\n\t\t\ttargetPropertyIsObject;\n\n\t\tif(value !== UNDEFINED) {\n\t\t\tif(validatorIsObject(value)) {\n\t\t\t\ttargetPropertyIsObject = validatorIsObject(targetProperty);\n\n\t\t\t\tif(value.length !== UNDEFINED) {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length !== UNDEFINED) ? targetProperty : [];\n\t\t\t\t} else {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length === UNDEFINED) ? targetProperty : {};\n\t\t\t\t}\n\n\t\t\t\tthis[property] = functionMerge(targetProperty, value);\n\t\t\t} else {\n\t\t\t\tthis[property] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn function functionMerge() {\n\t\tvar target = arguments[0],\n\t\t\ti = 1, properties;\n\n\t\tfor(; (properties = arguments[i]) !== UNDEFINED; i++) {\n\t\t\tfunctionIterate(properties, mergeProperties, target);\n\t\t}\n\n\t\treturn target;\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_UNDEFINED,\n\tvalidatorIsTypeOf,\n\tClassDescriptor\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n//=require class/Descriptor.js\n\nvar singletonUuid = (function() {\n\tvar objectDefineProperty = Object.defineProperty,\n\t\tregex                = new RegExp('[xy]', 'g'),\n\t\tstorage              = {};\n\n\tfunction randomize(character) {\n\t\tvar r = Math.random() * 16 | 0;\n\n\t\treturn ((character === 'x') ? r : (r & 0x3 | 0x8)).toString(16);\n\t}\n\n\tfunction Uuid() {}\n\n\tUuid.prototype = {\n\t\tgenerate: function() {\n\t\t\tvar result;\n\n\t\t\tdo {\n\t\t\t\tresult = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(regex, randomize);\n\t\t\t} while(storage[result]);\n\n\t\t\tstorage[result] = 1;\n\n\t\t\treturn result;\n\t\t},\n\t\tset: function(target) {\n\t\t\tif(validatorIsTypeOf(target.uuid, STRING_UNDEFINED)) {\n\t\t\t\tobjectDefineProperty(target, 'uuid', new ClassDescriptor(this.generate()));\n\t\t\t}\n\n\t\t\treturn target.uuid;\n\t\t}\n\t};\n\n\treturn new Uuid();\n}());","/**\n * Based on setAsap:\n *   Repo:    https://github.com/taylorhakes/setAsap\n *   License: https://github.com/taylorhakes/setAsap/blob/master/LICENSE\n */\n\n/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tNULL, TRUE, FALSE,\n\tsingletonUuid\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require singleton/uuid.js\n\n/**\n * defer\n *\n * delay function execution like setImmediate does\n *\n * @param {function} function\n */\nvar functionDefer = (function() {\n\tvar hasSetImmediate = 'setImmediate' in global,\n\t\telement, fallback;\n\n\tif('MutationObserver' in global) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement = document.createElement('div');\n\n\t\t\tnew MutationObserver(function() { fn(); })\n\t\t\t\t.observe(element, { attributes: TRUE });\n\n\t\t\telement.setAttribute('i', '1');\n\t\t};\n\t}\n\n\tif(!hasSetImmediate && 'postMessage' in global && !('importScripts' in global) && 'addEventListener' in global) {\n\t\treturn (function() {\n\t\t\tvar storage = {};\n\n\t\t\tfunction onMessage(event) {\n\t\t\t\tif(event.source === global && event.data && storage[event.data]) {\n\t\t\t\t\tstorage[event.data]();\n\n\t\t\t\t\tdelete storage[event.data];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tglobal.addEventListener('message', onMessage, FALSE);\n\n\t\t\treturn function functionDefer(fn) {\n\t\t\t\tvar uuid = singletonUuid.generate();\n\n\t\t\t\tstorage[uuid] = fn;\n\n\t\t\t\tglobal.postMessage(uuid, '*');\n\t\t\t};\n\t\t}());\n\t}\n\n\tif(!hasSetImmediate && 'onreadystatechange' in (element = document.createElement('script'))) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement.onreadystatechange = function onreadystatechange() {\n\t\t\t\telement.onreadystatechange = NULL;\n\t\t\t\telement.parentNode.removeChild(element);\n\n\t\t\t\tfn();\n\t\t\t};\n\n\t\t\tdocument.body.appendChild(element);\n\t\t};\n\t}\n\n\t/* eslint-disable no-undef */\n\tfallback = hasSetImmediate ? setImmediate : setTimeout;\n\t/* eslint-enable no-undef */\n\n\treturn function functionDefer(fn) {\n\t\tfallback(fn);\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tNULL, STRING_STRING, STRING_FUNCTION, EVENT_POST_CONFIGURE,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require validator/isTypeOf.js\n\nvar singletonEvent = (function() {\n\tvar regexMatchEvent = /^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Configure|Request|Process|Cache)$/,\n\t\tlistener        = {};\n\n\tfunction Event() {}\n\n\tEvent.prototype = {\n\t\temit: function (event, filter) {\n\t\t\tvar pointer = listener[event],\n\t\t\t\tparameter, i, item;\n\n\t\t\tif(pointer) {\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 2);\n\n\t\t\t\tfor(i = 0; (item = pointer[i]); i++) {\n\t\t\t\t\tif(!item.filter || item.filter === filter) {\n\t\t\t\t\t\titem.callback.apply(NULL, parameter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\ton: function(events, callback) {\n\t\t\tvar event, pointer;\n\n\t\t\tif(validatorIsTypeOf(events, STRING_STRING) && validatorIsTypeOf(callback, STRING_FUNCTION)) {\n\t\t\t\tevents = events.split(' ');\n\n\t\t\t\twhile(event = events.shift()) {\n\t\t\t\t\tevent = event.split(':');\n\n\t\t\t\t\tif(regexMatchEvent.test(event[0])) {\n\t\t\t\t\t\t(listener[event[0]] || (listener[event[0]] = [])).push({ callback: callback, filter: event[1] });\n\n\t\t\t\t\t\tif(event[0] === EVENT_POST_CONFIGURE && (pointer = settings.modules[event[1]])) {\n\t\t\t\t\t\t\tcallback(pointer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\treturn new Event();\n}());\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout\n*/\n\nvar functionEscapeRegex = (function() {\n\tvar regexMatchRegex = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n\n\treturn function functionEscapeRegex(value) {\n\t\treturn value.replace(regexMatchRegex, '\\\\$&');\n\t};\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tDEMAND_ID, PROVIDE_ID, PATH_ID,\n\tfunctionEscapeRegex, functionResolveUrl\n*/\n\n//=require constants.js\n//=require function/escapeRegex.js\n//=require function/resolveUrl.js\n\nvar regexIsAbsoluteUri  = /^(http(s?):)?\\/\\//i,\n\tregexMatchSourcemap = /\\/\\/#\\s+sourceMappingURL\\s*=\\s*(?!(?:http[s]?:)?\\/\\/)(.+?)\\.map/g,\n\tregexMatchBaseUrl   = new RegExp('^' + functionEscapeRegex(functionResolveUrl('/'))),\n\tregexMatchInternal  = new RegExp('^' + DEMAND_ID + '|' + PROVIDE_ID + '|' + PATH_ID + '$'),\n\tregexMatchParameter = /^(mock:)?([+-])?((?:[-\\w]+\\/?)+)?(?:@(\\d+\\.\\d+.\\d+))?(?:#(\\d+))?!/;","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tregexMatchParameter, regexMatchBaseUrl, regexIsAbsoluteUri,\n\tfunctionResolveUrl\n*/\n\n//=require variables.js\n//=require function/resolveUrl.js\n\nvar functionResolvePath = (function() {\n\tvar regexIsAbsolutePath = /^\\//;\n\n\treturn function functionResolvePath(uri, context) {\n\t\tvar path = uri.replace(regexMatchParameter, '');\n\n\t\tif(!regexIsAbsolutePath.test(path) && !regexIsAbsoluteUri.test(path)) {\n\t\t\tpath = '/' + functionResolveUrl(((context && functionResolveUrl(context + '/../')) || '/') + path).replace(regexMatchBaseUrl, '');\n\t\t}\n\n\t\treturn path;\n\t};\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tDEMAND_ID, FUNCTION_EMPTY, EVENT_POST_PROCESS, EVENT_CACHE_HIT, EVENT_CACHE_MISS, EVENT_CACHE_EXCEED, EVENT_CACHE_CLEAR, EVENT_PRE_CACHE, EVENT_PRE_CACHE, EVENT_POST_CACHE, STRING_STRING, NULL, FALSE, TRUE,\n\tvalidatorIsTypeOf, validatorIsInstanceOf,\n\tfunctionGetTimestamp, functionEscapeRegex, functionIterate, functionDefer, functionResolveId,\n\tClassDependency,\n\tsingletonEvent\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n//=require validator/isInstanceOf.js\n//=require function/getTimestamp.js\n//=require function/escapeRegex.js\n//=require function/iterate.js\n//=require function/defer.js\n//=require function/resolveId.js\n//=require singleton/event.js\n\nvar singletonCache = (function(JSON) {\n\tvar STORAGE_PREFIX         = '[' + DEMAND_ID + ']',\n\t\tSTORAGE_SUFFIX_STATE   = '[state]',\n\t\tSTORAGE_SUFFIX_VALUE   = '[value]',\n\t\tregexMatchState        = new RegExp('^' + functionEscapeRegex(STORAGE_PREFIX) + '\\\\[(.+?)\\\\]' + functionEscapeRegex(STORAGE_SUFFIX_STATE) + '$'),\n\t\tsupportsLocalStorage   = (function() { try { return 'localStorage' in global && global.localStorage; } catch(exception) { return FALSE; } }()),\n\t\tsupportsRemainingSpace = supportsLocalStorage && 'remainingSpace' in localStorage,\n\t\tcache;\n\n\tsingletonEvent\n\t\t.on(EVENT_POST_PROCESS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tdependency.source && cache.set(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tcache.clear.path(dependency.id);\n\t\t});\n\n\tfunction cachingEnabled(dependency) {\n\t\tvar match;\n\n\t\tif(dependency.cache !== NULL) {\n\t\t\treturn dependency.cache;\n\t\t}\n\n\t\tfunctionIterate(settings.cache, function(property, value) {\n\t\t\tif(dependency.path.indexOf(property) === 0 && (!match || value.weight > match.weight)) {\n\t\t\t\tmatch = value;\n\t\t\t}\n\t\t});\n\n\t\treturn match ? match.state : FALSE;\n\n\t}\n\n\tfunction emit(event, dependency, state) {\n\t\tsingletonEvent.emit(event, dependency.id, dependency, state);\n\t}\n\n\tfunction Cache() {}\n\n\tCache.prototype = {\n\t\tget: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function get(dependency) {\n\t\t\t\t\tvar id, state;\n\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tid    = STORAGE_PREFIX + '[' + dependency.id + ']';\n\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(id + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\tif(state && state.version === dependency.version && ((!state.expires && !dependency.lifetime) || state.expires > functionGetTimestamp())) {\n\t\t\t\t\t\t\tdependency.source = localStorage.getItem(id + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\t\temit(EVENT_CACHE_HIT, dependency);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn function get(dependency) {\n\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t};\n\t\t\t}\n\t\t}()),\n\t\tset: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function set(dependency) {\n\t\t\t\t\tvar state;\n\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tstate = { version: dependency.version, expires: dependency.lifetime ? functionGetTimestamp() + dependency.lifetime : dependency.lifetime };\n\n\t\t\t\t\t\temit(EVENT_PRE_CACHE, dependency, state);\n\n\t\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\t\tvar id = STORAGE_PREFIX + '[' + dependency.id + ']',\n\t\t\t\t\t\t\t\tspaceBefore;\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tspaceBefore = supportsRemainingSpace ? localStorage.remainingSpace : NULL;\n\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_VALUE, dependency.source);\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_STATE, JSON.stringify(state));\n\n\t\t\t\t\t\t\t\t// strict equality check with \"===\" is required due to spaceBefore might be \"0\"\n\t\t\t\t\t\t\t\tif(spaceBefore !== NULL && localStorage.remainingSpace === spaceBefore) {\n\t\t\t\t\t\t\t\t\tthrow new Error('QUOTA_EXCEEDED_ERR');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\temit(EVENT_POST_CACHE, dependency, state);\n\t\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\t\temit(EVENT_CACHE_EXCEED, dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}()),\n\t\tclear: {\n\t\t\tpath: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function path(path) {\n\t\t\t\t\t\tvar id  = functionResolveId(path),\n\t\t\t\t\t\t\tkey = STORAGE_PREFIX + '[' + id + ']';\n\n\t\t\t\t\t\tif(localStorage[key + STORAGE_SUFFIX_STATE]) {\n\t\t\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_STATE);\n\t\t\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\t\t\temit(EVENT_CACHE_CLEAR, ClassDependency.get(id) || new ClassDependency(id, NULL, FALSE));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}()),\n\t\t\tall: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function all() {\n\t\t\t\t\t\tvar match;\n\n\t\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\t\tmatch && this.path(match[1]);\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}()),\n\t\t\texpired: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function expired() {\n\t\t\t\t\t\tvar match, state;\n\n\t\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\t\tif(match) {\n\t\t\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '[' + match[1] + ']' + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\t\t\tif(state && state.expires > 0 && state.expires <= functionGetTimestamp()) {\n\t\t\t\t\t\t\t\t\tthis.path(match[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}())\n\t\t}\n\t};\n\n\treturn (cache = new Cache());\n}(JSON));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n \tFUNCTION_EMPTY, NULL,\n\tarrayPrototypeSlice, arrayPrototypeConcat,\n\tfunctionDefer,\n\tsingletonUuid\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require function/defer.js\n//=require singleton/uuid.js\n\nvar ClassPledge = (function() {\n\tvar PLEDGE_PENDING  = 'pending',\n\t\tPLEDGE_RESOLVED = 'resolved',\n\t\tPLEDGE_REJECTED = 'rejected',\n\t\tstorage         = {};\n\n\tfunction resolve() {\n\t\tstorage[this.uuid].handle(PLEDGE_RESOLVED, arguments);\n\t}\n\n\tfunction reject() {\n\t\tstorage[this.uuid].handle(PLEDGE_REJECTED, arguments);\n\t}\n\n\tfunction handle(state, parameter) {\n\t\tvar properties = storage[this.uuid],\n\t\t\tpointer, result;\n\n\t\tif(properties.state === PLEDGE_PENDING) {\n\t\t\tproperties.state = state;\n\t\t\tproperties.value = parameter;\n\t\t}\n\n\t\twhile(pointer = properties[properties.state].shift()) {\n\t\t\tresult = pointer.handler.apply(NULL, properties.value);\n\n\t\t\tif(result && typeof result.then === 'function') {\n\t\t\t\tresult.then(pointer.deferred.resolve, pointer.deferred.reject);\n\t\t\t} else {\n\t\t\t\tpointer.deferred[properties.state === PLEDGE_RESOLVED ? 'resolve' : 'reject'].apply(NULL, properties.value);\n\t\t\t}\n\t\t}\n\n\t\tproperties[PLEDGE_RESOLVED].length = 0;\n\t\tproperties[PLEDGE_REJECTED].length = 0;\n\t}\n\n\tfunction observe(pledge, index, properties) {\n\t\tpledge.then(\n\t\t\tfunction() {\n\t\t\t\tproperties.resolved[index] = arrayPrototypeSlice.call(arguments);\n\n\t\t\t\tproperties.count++;\n\n\t\t\t\tcheck(properties);\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tproperties.rejected.push(arrayPrototypeSlice.call(arguments));\n\n\t\t\t\tcheck(properties);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction check(properties) {\n\t\tif(properties.count === properties.total) {\n\t\t\tproperties.deferred.resolve.apply(NULL, arrayPrototypeConcat.apply([], properties.resolved));\n\t\t} else if(properties.rejected.length + properties.count === properties.total) {\n\t\t\tproperties.deferred.reject.apply(NULL, arrayPrototypeConcat.apply([], properties.rejected));\n\t\t}\n\t}\n\n\tfunction ClassPledge(executor) {\n\t\tvar self = this;\n\n\t\tstorage[singletonUuid.set(self)] = { state: PLEDGE_PENDING, handle: handle.bind(self), value: NULL, resolved: [], rejected: [], count: 0 };\n\n\t\texecutor(resolve.bind(self), reject.bind(self));\n\t}\n\n\tClassPledge.prototype = {\n\t\t/* only for reference\n\t\t uuid: NULL\n\t\t */\n\t\t'catch': function(listener) {\n\t\t\treturn this.then(FUNCTION_EMPTY, listener);\n\t\t},\n\t\talways: function(alwaysListener) {\n\t\t\treturn this.then(alwaysListener, alwaysListener);\n\t\t},\n\t\tthen: function(resolveListener, rejectListener) {\n\t\t\tvar properties = storage[this.uuid],\n\t\t\t\tdeferred   = ClassPledge.defer();\n\n\t\t\tresolveListener && properties[PLEDGE_RESOLVED].push({ handler: resolveListener, deferred: deferred });\n\t\t\trejectListener && properties[PLEDGE_REJECTED].push({ handler: rejectListener, deferred: deferred });\n\n\t\t\tif(properties.state !== PLEDGE_PENDING) {\n\t\t\t\tfunctionDefer(properties.handle);\n\t\t\t}\n\n\t\t\treturn deferred.pledge;\n\t\t},\n\t\tisPending: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_PENDING;\n\t\t},\n\t\tisResolved: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_RESOLVED;\n\t\t},\n\t\tisRejected: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_REJECTED;\n\t\t}\n\t};\n\n\tClassPledge.defer = function() {\n\t\tvar self = {};\n\n\t\tself.pledge = new ClassPledge(function(resolveListener, rejectListener) {\n\t\t\tself.resolve = resolveListener;\n\t\t\tself.reject  = rejectListener;\n\t\t});\n\n\t\treturn self;\n\t};\n\n\tClassPledge.all = function(pledges) {\n\t\tvar deferred   = ClassPledge.defer(),\n\t\t\tproperties = (storage[singletonUuid.generate()] = { deferred: deferred, resolved: [], rejected: [], total: pledges.length, count: 0 }),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tobserve(pledge, i, properties)\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\tClassPledge.race = function(pledges) {\n\t\tvar deferred = ClassPledge.defer(),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tpledge.then(deferred.resolve, deferred.reject);\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\treturn ClassPledge;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tsingletonUuid\n*/\n\n//=require singleton/uuid.js\n\nvar ClassRegistry = (function() {\n\tvar storage = {};\n\n\tfunction ClassRegistry() {\n\t\tvar self = this;\n\n\t\tstorage[singletonUuid.set(self)] = {};\n\t}\n\n\tClassRegistry.prototype = {\n\t\tget: function(key) {\n\t\t\treturn key ? storage[this.uuid][key] : storage[this.uuid];\n\t\t},\n\t\tset: function(key, value) {\n\t\t\tstorage[this.uuid][key] = value;\n\t\t}\n\t};\n\n\treturn ClassRegistry;\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tMODULE_PREFIX_HANDLER, ERROR_LOAD, DEMAND_ID, PROVIDE_ID, PATH_ID, MOCK_PREFIX, NULL, TRUE, FALSE,\n\tregexMatchInternal, regexMatchParameter,\n\tvalidatorIsPositive,\n\tfunctionResolvePath, functionResolveId, functionResolveUrl, functionIterate,\n\tClassRegistry, ClassPledge, ClassFailure,\n\tsingletonCache\n*/\n\n//=require constants.js\n//=require variables.js\n//=require validator/isPositive.js\n//=require function/resolvePath.js\n//=require function/resolveId.js\n//=require function/resolveUrl.js\n//=require function/iterate.js\n//=require class/registry.js\n//=require class/pledge.js\n//=require class/failure.js\n//=require singleton/cache.js\n\nvar ClassDependency = (function() {\n\tvar registry = new ClassRegistry();\n\n\tfunction ClassDependency(uri, context, register) {\n\t\tvar self      = this,\n\t\t\tparameter = uri.match(regexMatchParameter);\n\n\t\tself.path     = functionResolvePath(uri, context);\n\t\tself.mock     = (parameter && parameter[1]) ? TRUE : FALSE;\n\t\tself.cache    = (parameter && parameter[2]) ? parameter[1] === '+' : NULL;\n\t\tself.type     = (parameter && parameter[3]) || settings.handler;\n\t\tself.version  = (parameter && parameter[4]) || settings.version;\n\t\tself.lifetime = (parameter && parameter[5] && parameter[5] * 1000) || settings.lifetime;\n\t\tself.id       = (self.mock ? MOCK_PREFIX : '' ) + self.type + '!' + self.path;\n\t\tself.uri      = (self.mock ? MOCK_PREFIX : '' ) + self.type + '@' + self.version + (validatorIsPositive(self.lifetime) && self.lifetime > 0 ? '#' + self.lifetime : '' ) + '!' + self.path;\n\t\tself.deferred = ClassPledge.defer();\n\t\tself.pledge   = self.deferred.pledge;\n\n\t\t(register !== FALSE) && registry.set(self.id, self);\n\n\t\treturn self;\n\t}\n\n\t/* only for reference\n\t ClassDependency.prototype = {\n\t \tpath:     NULL,\n\t \tmock:     NULL,\n\t\tcache:    NULL,\n\t\ttype:     NULL,\n\t\tversion:  NULL,\n\t\tlifetime: NULL,\n\t \tid:       NULL,\n\t \turi:      NULL,\n\t\tdeferred: NULL,\n\t\tpledge:   NULL,\n\t\thandler:  NULL, // set by Dependency.resolve\n\t \tsource:   NULL, // set by Cache or Loader\n\t \turl:      NULL, // optional, set by Loader\n\t\tdelay:    NULL, // optional, set by handler\n\t};\n\t*/\n\n\tClassDependency.get = function(uri, context) {\n\t\treturn registry.get(functionResolveId(uri, context));\n\t};\n\n\tClassDependency.resolve = function(uri, context) {\n\t\tvar dependency = this.get(uri, context);\n\n\t\tif(!dependency) {\n\t\t\tdependency = new ClassDependency(uri, context);\n\n\t\t\tif(context && regexMatchInternal.test(uri)) {\n\t\t\t\tswitch(uri) {\n\t\t\t\t\tcase DEMAND_ID:\n\t\t\t\t\t\tdependency.deferred.resolve((function() {\n\t\t\t\t\t\t\tvar scopedDemand = demand.bind(context);\n\n\t\t\t\t\t\t\tfunctionIterate(demand, function(property, value) {\n\t\t\t\t\t\t\t\tscopedDemand[property] = value;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn scopedDemand;\n\t\t\t\t\t\t}()));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PROVIDE_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(provide.bind(context));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PATH_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(context);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdemand(MODULE_PREFIX_HANDLER + dependency.type)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(handler) {\n\t\t\t\t\t\t\tdependency.handler = handler;\n\n\t\t\t\t\t\t\tif(dependency.mock) {\n\t\t\t\t\t\t\t\tdependency.deferred.resolve(handler);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsingletonCache.get(dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (handler)', self.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn dependency;\n\t};\n\n\tClassDependency.list = {\n\t\tall: function() {\n\t\t\treturn Object.keys(registry.get());\n\t\t},\n\t\tpending:  function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isPending()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\tresolved: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isResolved()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\trejected: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isRejected()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t}\n\t};\n\n\treturn ClassDependency;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tfunctionResolveUrl, functionEscapeRegex, functionIterate\n*/\n\n//=require function/resolveUrl.js\n//=require function/escapeRegex.js\n//=require function/iterate.js\n\nvar ClassPattern = (function() {\n\tvar regexMatchTrailingSlash = /(.+)\\/$/;\n\n\tfunction ClassPattern(pattern, url) {\n\t\tvar self = this;\n\n\t\tself.weight   = pattern.length;\n\t\tself.match    = new RegExp('^' + functionEscapeRegex(pattern));\n\t\tself.location = [].concat(url);\n\n\t\tfunctionIterate(self.location, function(property, value) {\n\t\t\tself.location[property] = {\n\t\t\t\turl:   functionResolveUrl(value).replace(regexMatchTrailingSlash, '$1'),\n\t\t\t\tmatch: new RegExp('^' + functionEscapeRegex(value))\n\t\t\t};\n\t\t});\n\t}\n\n\tClassPattern.prototype = {\n\t\t/* only for reference\n\t\t weight:   0,\n\t\t match:    NULL,\n\t\t location: NULL,\n\t\t */\n\t\tmatches: function(path) {\n\t\t\treturn this.match.test(path);\n\t\t},\n\t\tprocess: function(path, index) {\n\t\t\tvar current = this.location[index];\n\n\t\t\tif(current) {\n\t\t\t\treturn path.replace(this.match, current.url);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn ClassPattern;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tregexMatchBaseUrl,\n\tClassPledge\n*/\n\n//=require shortcuts.js\n//=require variables.js\n//=require class/pledge.js\n\nvar ClassXhr = (function(XMLHttpRequest) {\n\tvar XDomainRequest = 'XDomainRequest' in global && global.XDomainRequest || XMLHttpRequest;\n\t\n\tfunction checkState() {\n\t\tif(this.readyState < 4) {\n\t\t\tthis.abort();\n\t\t}\n\t}\n\t\n\treturn function ClassXhr(url) {\n\t\tvar boundCheckState = checkState.bind(this),\n\t\t\tdeferred        = ClassPledge.defer(),\n\t\t\txhr             = regexMatchBaseUrl.test(url) ? new XMLHttpRequest() : new XDomainRequest(),\n\t\t\ttimeout         = settings.timeout,\n\t\t\tpointer;\n\n\t\txhr.ontimeout = xhr.onerror = xhr.onabort = function() {\n\t\t\tdeferred.reject(xhr.status);\n\t\t};\n\t\txhr.onprogress = xhr.onreadystatechange = function() {\n\t\t\tclearTimeout(pointer);\n\n\t\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t};\n\t\txhr.onload = function() {\n\t\t\ttimeout = clearTimeout(timeout);\n\n\t\t\tif(!('status' in xhr) || xhr.status === 200) {\n\t\t\t\tdeferred.resolve(xhr.responseText, xhr.getResponseHeader && xhr.getResponseHeader('content-type'));\n\t\t\t} else {\n\t\t\t\tdeferred.reject(xhr.status);\n\t\t\t}\n\t\t};\n\n\t\txhr.open('GET', url, true);\n\t\txhr.send();\n\t\t\n\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t\n\t\treturn deferred.pledge;\n\t};\n}(XMLHttpRequest));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_BOOLEAN, STRING_STRING, EVENT_PRE_CONFIGURE, EVENT_POST_CONFIGURE, EVENT_CACHE_MISS, EVENT_CACHE_HIT, EVENT_PRE_REQUEST, EVENT_POST_REQUEST, EVENT_PRE_PROCESS, EVENT_POST_PROCESS, NULL, FALSE,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf, validatorIsObject, validatorIsPositive,\n\tfunctionIterate, functionMerge, functionDefer,\n\tClassPledge, ClassDependency, ClassPattern, ClassLoader, \n\tsingletonEvent, singletonCache\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require validator/isTypeOf.js\n//=require validator/isObject.js\n//=require validator/isPositive.js\n//=require function/iterate.js\n//=require function/merge.js\n//=require function/defer.js\n//=require singleton/event.js\n//=require singleton/cache.js\n//=require class/pledge.js\n//=require class/dependency.js\n//=require class/pattern.js\n//=require class/loader.js\n\nglobal.demand = (function() {\n\tfunction demand() {\n\t\tvar dependencies = arrayPrototypeSlice.call(arguments),\n\t\t\tcontext      = this !== global ? this : NULL,\n\t\t\ti = 0, uri;\n\n\t\tfor(; (uri = dependencies[i]); i++) {\n\t\t\tdependencies[i] = ClassDependency.resolve(uri, context).pledge;\n\t\t}\n\n\t\treturn ClassPledge.all(dependencies);\n\t}\n\n\tdemand.configure = function(options) {\n\t\tvar cache    = options.cache,\n\t\t\tversion  = options.version,\n\t\t\ttimeout  = options.timeout,\n\t\t\tlifetime = options.lifetime,\n\t\t\tbase     = options.base,\n\t\t\tpattern  = options.pattern,\n\t\t\tmodules  = options.modules,\n\t\t\tpointer  = settings.modules,\n\t\t\ttemp;\n\n\t\tif(validatorIsTypeOf(cache, STRING_BOOLEAN)) {\n\t\t\tsettings.cache[''] = { weight: 0, state: cache };\n\t\t} else if(validatorIsObject(cache)) {\n\t\t\tfunctionIterate(cache, function(property, value) {\n\t\t\t\tsettings.cache[property] = { weight: property.length, state: value };\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsTypeOf(version, STRING_STRING)) {\n\t\t\tsettings.version = version;\n\t\t}\n\n\t\tif(validatorIsPositive(timeout)) {\n\t\t\tsettings.timeout = Math.min(Math.max(timeout, 2), 12) * 1000;\n\t\t}\n\n\t\tif(validatorIsPositive(lifetime) && lifetime > 0) {\n\t\t\tsettings.lifetime = lifetime * 1000;\n\t\t}\n\n\t\tif(validatorIsTypeOf(base, STRING_STRING) && base !== '') {\n\t\t\tsettings.pattern.base = new ClassPattern('', base);\n\t\t}\n\n\t\tif(validatorIsObject(pattern)) {\n\t\t\tfunctionIterate(pattern, function(property, value) {\n\t\t\t\tproperty !== 'base' && (settings.pattern[property] = new ClassPattern(property, value));\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsObject(modules)) {\n\t\t\tfunctionIterate(modules, function(property, value) {\n\t\t\t\ttemp = pointer[property] = pointer[property] || {};\n\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_CONFIGURE, property, temp);\n\n\t\t\t\tfunctionMerge(temp, value);\n\n\t\t\t\tsingletonEvent.emit(EVENT_POST_CONFIGURE, property, temp);\n\t\t\t});\n\t\t}\n\n\t\treturn demand;\n\t};\n\n\tdemand.on    = singletonEvent.on.bind(demand);\n\tdemand.list  = ClassDependency.list;\n\tdemand.clear = singletonCache.clear;\n\n\tdemand\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tnew ClassLoader(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_HIT + ' ' + EVENT_POST_REQUEST, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_PROCESS, dependency.id, dependency)\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_PRE_REQUEST, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPreRequest;\n\n\t\t\tpointer && pointer.call(dependency);\n\t\t})\n\t\t.on(EVENT_POST_REQUEST, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPostRequest;\n\n\t\t\tpointer && pointer.call(dependency);\n\t\t})\n\t\t.on(EVENT_PRE_PROCESS, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPreProcess,\n\t\t\t\tenqueue = (dependency.handler.enqueue !== FALSE) ? functionDefer.bind(NULL, function() { queue.enqueue(dependency); }) : NULL;\n\n\t\t\tpointer && pointer.call(dependency);\n\n\t\t\tdependency.pledge.then(function() {\n\t\t\t\tsingletonEvent.emit(EVENT_POST_PROCESS, dependency.id, dependency);\n\t\t\t});\n\n\t\t\tif(enqueue) {\n\t\t\t\tif(dependency.delay) {\n\t\t\t\t\tdependency.delay.then(enqueue);\n\t\t\t\t} else {\n\t\t\t\t\tenqueue();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\treturn demand;\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tSTRING_STRING, STRING_FUNCTION, ERROR_PROVIDE, ERROR_PROVIDE_ANONYMOUS, NULL,\n\tvalidatorIsTypeOf, validatorIsArray, functionLog,\n\tClassDependency, ClassFailure\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n//=require validator/isArray.js\n//=require function/log.js\n//=require class/dependency.js\n//=require class/failure.js\n\nglobal.provide = function provide() {\n\tvar uri          = validatorIsTypeOf(arguments[0], STRING_STRING) ? arguments[0] : NULL,\n\t\tdependencies = validatorIsArray(arguments[uri ? 1 : 0]) ? arguments[uri ? 1 : 0] : NULL,\n\t\tdefinition   = dependencies ? arguments[uri ? 2 : 1] : arguments[uri ? 1 : 0],\n\t\tmodule, isFunction;\n\n\tif(!uri && processor.current) {\n\t\tmodule = processor.current;\n\t\turi    = module.uri;\n\n\t\tprocessor.process();\n\t}\n\t\n\tif(uri) {\n\t\tmodule     = module || new ClassDependency(uri);\n\t\tisFunction = validatorIsTypeOf(definition, STRING_FUNCTION);\n\n\t\tif(dependencies) {\n\t\t\tdemand\n\t\t\t\t.apply(module.path, dependencies)\n\t\t\t\t.then(\n\t\t\t\t\tfunction() { module.deferred.resolve(isFunction ? definition.apply(NULL, arguments) : definition); },\n\t\t\t\t\tfunction() { functionLog(new ClassFailure(ERROR_PROVIDE, module.id)); }\n\t\t\t\t);\n\t\t} else {\n\t\t\tmodule.deferred.resolve(isFunction ? definition() : definition);\n\t\t}\n\t} else {\n\t\tthrow new ClassFailure(ERROR_PROVIDE_ANONYMOUS);\n\t}\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tEVENT_QUEUE_ENQUEUE, EVENT_QUEUE_DEQUEUE,\n\tarrayPrototypeSlice,\n\tsingletonUuid, singletonEvent\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require singleton/uuid.js\n//=require singleton/event.js\n\nvar ClassQueue = (function() {\n\tvar storage = {};\n\t\n\tfunction ClassQueue() {\n\t\tstorage[singletonUuid.set(this)] = [];\n\t}\n\t\n\tClassQueue.prototype = {\n\t\t/* only for reference\n\t\t uuid: NULL,\n\t\t */\n\t\tenqueue: function() {\n\t\t\tstorage[this.uuid] = storage[this.uuid].concat(arrayPrototypeSlice.call(arguments));\n\n\t\t\tsingletonEvent.emit(EVENT_QUEUE_ENQUEUE, this.uuid);\n\t\t},\n\t\tdequeue: function() {\n\t\t\tsingletonEvent.emit(EVENT_QUEUE_DEQUEUE, this.uuid);\n\n\t\t\treturn storage[this.uuid].shift();\n\t\t},\n\t\tget current() {\n\t\t\treturn storage[this.uuid][0];\n\t\t},\n\t\tget length() {\n\t\t\treturn storage[this.uuid].length;\n\t\t}\n\t};\n\t\n\treturn ClassQueue;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tEVENT_QUEUE_ENQUEUE, NULL,\n\tsingletonUuid, singletonEvent\n*/\n\n//=require constants.js\n//=require singleton/uuid.js\n//=require singleton/event.js\n\nvar ClassProcessor = (function() {\n\tvar storage = {};\n\n\tfunction ClassProcessor(queue) {\n\t\tvar self    = this,\n\t\t\tpointer = storage[singletonUuid.set(self)] = { queue: queue, current: NULL };\n\n\t\tsingletonEvent\n\t\t\t.on(EVENT_QUEUE_ENQUEUE + ':' + queue.uuid, function() {\n\t\t\t\t!pointer.current && self.process();\n\t\t\t});\n\t}\n\n\tClassProcessor.prototype = {\n\t\t/* only for reference\n\t\t uuid: NULL,\n\t\t */\n\t\tprocess: function() {\n\t\t\tvar pointer = storage[singletonUuid.set(this)],\n\t\t\t\tcurrent;\n\n\t\t\tif(pointer.queue.length) {\n\t\t\t\tcurrent = pointer.current = pointer.queue.dequeue();\n\n\t\t\t\tcurrent.handler.process && current.handler.process.call(current);\n\t\t\t} else {\n\t\t\t\tpointer.current = NULL;\n\t\t\t}\n\t\t},\n\t\tget current() {\n\t\t\treturn storage[singletonUuid.set(this)].current;\n\t\t}\n\t};\n\t\n\treturn ClassProcessor;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tEVENT_PRE_REQUEST, EVENT_POST_REQUEST,\n\tlinkElement,\n\tregexMatchSourcemap, regexIsAbsoluteUri,\n\tfunctionResolveUrl\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require variables.js\n//=require function/resolveUrl.js\n\nvar handlerModule = (function() {\n\tvar target         = document.getElementsByTagName('head')[0],\n\t\tregexMatchType = /^(application|text)\\/(x-)?javascript/;\n\n\treturn {\n\t\tvalidate: function(type) {\n\t\t\treturn regexMatchType.test(type);\n\t\t},\n\t\tonPreRequest: function() {\n\t\t\tvar url = this.url;\n\n\t\t\tthis.url = url.slice(-3) !== '.js' ? url + '.js' : url;\n\t\t},\n\t\tonPostRequest: function() {\n\t\t\tvar self = this,\n\t\t\t\tmatch, replacement;\n\n\t\t\twhile(match = regexMatchSourcemap.exec(self.source)) {\n\t\t\t\tif(regexIsAbsoluteUri.test(match[1])) {\n\t\t\t\t\tlinkElement.href = self.url;\n\n\t\t\t\t\treplacement = linkElement.protocol + '//' + linkElement.host + match[1];\n\t\t\t\t} else {\n\t\t\t\t\treplacement = functionResolveUrl(self.url + '/../' + match[1]);\n\t\t\t\t}\n\n\t\t\t\tself.source = self.source.replace(match[0], '//# sourceMappingURL=' + replacement + '.map');\n\t\t\t}\n\t\t},\n\t\tprocess: function() {\n\t\t\tvar self = this,\n\t\t\t\tscript;\n\n\t\t\tif(self.source) {\n\t\t\t\tscript       = document.createElement('script');\n\t\t\t\tscript.async = true;\n\t\t\t\tscript.text  = self.source;\n\n\t\t\t\tscript.setAttribute('demand-id', self.id);\n\n\t\t\t\ttarget.appendChild(script);\n\t\t\t}\n\t\t}\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout,\n\tMODULE_PREFIX_HANDLER, EVENT_POST_CONFIGURE, ERROR_RESOLVE, MOCK_PREFIX, FALSE,\n\tregexMatchSourcemap,\n\tvalidatorIsObject,\n\tfunctionIterate,\n\tClassDependency, ClassPledge, ClassFailure,\n\thandlerModule\n*/\n\n//=require constants.js\n//=require variables.js\n//=require validator/isObject.js\n//=require function/iterate.js\n//=require class/dependency.js\n//=require class/pledge.js\n//=require class/Failure.js\n//=require handler/module.js\n\nvar handlerBundle = (function() {\n\tvar path     = MODULE_PREFIX_HANDLER + 'bundle',\n\t\tsettings = {};\n\n\tdemand\n\t\t.on(EVENT_POST_CONFIGURE + ':' + path, function(options) {\n\t\t\tsettings = validatorIsObject(options) ? options : {};\n\t\t});\n\n\treturn {\n\t\tenqueue:  FALSE,\n\t\tvalidate: handlerModule.validate,\n\t\tonPreProcess: function() {\n\t\t\tvar self     = this,\n\t\t\t\tsource   = self.source,\n\t\t\t\tdeferred = self.deferred,\n\t\t\t\tmodules  = settings[self.path],\n\t\t\t\tmatch, pledges, dependency, i = 0, uri;\n\n\t\t\twhile(match = regexMatchSourcemap.exec(source)) {\n\t\t\t\tsource = source.replace(match[0], '');\n\t\t\t}\n\n\t\t\tfunction reject() {\n\t\t\t\tdeferred.reject(new ClassFailure(ERROR_RESOLVE, self.id, arguments));\n\t\t\t}\n\n\t\t\tself.source = source;\n\n\t\t\tif(modules) {\n\t\t\t\tpledges = [];\n\n\t\t\t\tfor(; (uri = modules[i]); i++) {\n\t\t\t\t\tpledges.push(ClassDependency.resolve(MOCK_PREFIX + uri).pledge);\n\t\t\t\t}\n\n\t\t\t\tClassPledge.all(pledges).then(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tvar i = 0, module;\n\n\t\t\t\t\t\tpledges.length = 0;\n\n\t\t\t\t\t\thandlerModule.process.call(self);\n\n\t\t\t\t\t\tfor(; (module = arguments[i]); i++) {\n\t\t\t\t\t\t\tdependency         = new ClassDependency(modules[i]);\n\t\t\t\t\t\t\tdependency.handler = module;\n\n\t\t\t\t\t\t\tqueue.enqueue(dependency);\n\t\t\t\t\t\t\tprocessor.process();\n\t\t\t\t\t\t\tpledges.push(dependency.pledge);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tClassPledge.all(pledges).then(\n\t\t\t\t\t\t\tdeferred.resolve,\n\t\t\t\t\t\t\treject\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\treject\n\t\t\t\t);\n\t\t\t}\n\n\t\t}\n\t};\n}());"]}