{"version":3,"sources":["demand.js","../src/function/iterate.js","../src/class/descriptor.js","../src/validator/isTypeOf.js","../src/validator/isObject.js","../src/validator/isPositive.js","../src/function/getTimestamp.js","../src/function/resolveUrl.js","../src/function/resolvePath.js","../src/function/resolveId.js","../src/abstract/uuid.js","../src/class/registry.js","../src/class/failure.js","../src/class/loader.js","../src/validator/isArray.js","../src/function/log.js","../src/function/hash.js","../src/class/queue.js","../src/class/processor.js","../src/class/Failure.js","../src/shortcuts.js","../src/constants.js","../src/inheritance.js","../src/function/merge.js","../src/function/uuid.js","../src/function/defer.js","../src/singleton/event.js","../src/function/escapeRegex.js","../src/variables.js","../src/singleton/cache.js","../src/class/pledge.js","../src/class/dependency.js","../src/class/pattern.js","../src/class/xhr.js","../src/demand.js","../src/provide.js","../src/handler/module.js","../src/handler/bundle.js","../src/plugin/genie.js"],"names":["global","document","options","setTimeout","clearTimeout","functionIterate","object","callback","context","property","properties","Object","keys","i","UNDEFINED","call","FALSE","ClassDescriptor","value","writable","configurable","enumerable","__proto__","NULL","validatorIsTypeOf","type","validatorIsObject","STRING_OBJECT","validatorIsPositive","STRING_NUMBER","isFinite","Math","floor","functionGetTimestamp","Date","functionResolveUrl","url","linkElement","href","functionResolvePath","uri","path","replace","regexMatchParameter","regexIsAbsolutePath","test","regexIsAbsoluteUri","regexMatchBaseUrl","functionResolveId","parameter","match","settings","handler","AbstractUuid","this","uuid","STRING_UNDEFINED","objectDefineProperty","functionUuid","ClassRegistry","parent","constructor","storage","ClassFailure","message","module","stack","arrayPrototypeSlice","ClassLoader","dependency","resolve","response","validate","source","singletonEvent","emit","EVENT_POST_REQUEST","deferred","reject","ERROR_LOAD","id","status","load","location","pattern","process","EVENT_PRE_REQUEST","ClassXhr","then","matches","weight","validatorIsArray","objectPrototypeToString","functionLog","failure","console","error","toString","functionHash","input","length","charCodeAt","ClassQueue","ClassProcessor","queue","self","pointer","current","on","EVENT_QUEUE_ENQUEUE","assignModule","factory","provide","processor","cache","timeout","modules","arrayPrototype","Array","prototype","slice","arrayPrototypeConcat","concat","objectPrototype","objectCreate","create","defineProperty","objectGetOwnPropertyNames","getOwnPropertyNames","objectGetOwnPropertyDescriptor","getOwnPropertyDescriptor","functionPrototype","Function","createElement","DEMAND_ID","PROVIDE_ID","PATH_ID","MODULE_PREFIX","MODULE_PREFIX_HANDLER","MODULE_PREFIX_PLUGIN","MODULE_PREFIX_FUNCTION","MODULE_PREFIX_VALIDATOR","MOCK_PREFIX","undefined","TRUE","STRING_STRING","STRING_BOOLEAN","STRING_FUNCTION","FUNCTION_EMPTY","EVENT_PREFIX","EVENT_POSTFIX","EVENT_CONFIGURE","EVENT_PRE_CONFIGURE","EVENT_POST_CONFIGURE","EVENT_CACHE","EVENT_CACHE_MISS","EVENT_CACHE_HIT","EVENT_CACHE_CLEAR","EVENT_CACHE_EXCEED","EVENT_PRE_CACHE","EVENT_POST_CACHE","EVENT_RESOLVE","EVENT_PRE_RESOLVE","EVENT_POST_RESOLVE","EVENT_REQUEST","EVENT_PROCESS","EVENT_PRE_PROCESS","EVENT_POST_PROCESS","EVENT_QUEUE","EVENT_QUEUE_DEQUEUE","ERROR_PROVIDE","ERROR_RESOLVE","ERROR_PROVIDE_ANONYMOUS","extend","forEach","functionMerge","mergeProperties","targetPropertyIsObject","targetProperty","target","arguments","randomize","character","r","random","regex","RegExp","functionDefer","element","fallback","hasSetImmediate","fn","MutationObserver","observe","attributes","setAttribute","onMessage","event","data","addEventListener","postMessage","onreadystatechange","parentNode","removeChild","body","appendChild","setImmediate","Event","regexMatchEvent","listener","filter","item","apply","events","split","shift","push","functionEscapeRegex","regexMatchRegex","regexMatchSourcemap","regexMatchInternal","singletonCache","JSON","cachingEnabled","indexOf","state","Cache","STORAGE_PREFIX","STORAGE_SUFFIX_STATE","STORAGE_SUFFIX_VALUE","regexMatchState","supportsLocalStorage","localStorage","exception","supportsRemainingSpace","set","clear","get","parse","getItem","version","expires","lifetime","spaceBefore","remainingSpace","setItem","stringify","Error","key","removeItem","ClassDependency","all","expired","ClassPledge","handle","PLEDGE_RESOLVED","PLEDGE_REJECTED","result","PLEDGE_PENDING","pledge","index","resolved","count","check","rejected","total","executor","bind","catch","always","alwaysListener","resolveListener","rejectListener","defer","isPending","isResolved","isRejected","pledges","race","extends","traverse","depth","indention","join","register","placeholder","mock","registry","scopedDemand","demand","list","pending","ClassPattern","regexMatchTrailingSlash","XMLHttpRequest","checkState","readyState","abort","XDomainRequest","boundCheckState","xhr","ontimeout","onerror","onabort","onprogress","onload","responseText","getResponseHeader","open","send","dependencies","configure","temp","base","min","max","onPreRequest","onPostRequest","onPreProcess","enqueue","delay","isFunction","definition","/demand","dequeue","handlerModule","getElementsByTagName","regexMatchType","replacement","exec","protocol","host","script","async","text","handlerBundle","getType","pluginGenie","matchPattern","prefix","generateConfiguration","bundle","configuration","/demand/handler/bundle","resolveDependencies","rejectDependencies","bundles","main"],"mappings":"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","file":"demand.js","sourcesContent":["/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tMODULE_PREFIX, MODULE_PREFIX_HANDLER, MODULE_PREFIX_VALIDATOR, MODULE_PREFIX_PLUGIN, MODULE_PREFIX_FUNCTION, TRUE,\n\tvalidatorIsTypeOf, validatorIsArray, validatorIsObject, validatorIsInstanceOf,\n\tfunctionResolveUrl, functionMerge, functionIterate, functionDefer, functionHash, functionUuid,\n \tClassQueue, ClassProcessor, ClassPledge, ClassXhr, ClassFailure, ClassDescriptor\n\thandlerModule, handlerBundle,\n \tpluginGenie\n*/\n\n/*eslint no-unused-vars: [2, { \"vars\": \"local\", \"args\": \"none\" }]*/\n(function(global, document, options, setTimeout, clearTimeout) {\n\t'use strict';\n\n\t/* eslint-disable no-unused-vars */\n\tvar settings = { cache: {}, timeout: 8000, pattern: {}, modules: {}, handler: 'module' },\n\t\tstorage  = {},\n\t\tqueue, processor;\n\t/* eslint-enable no-unused-vars */\n\n\t// include inheritance\n\t\t//=require inheritance.js\n\n\t// include main components\n\t\t//=require demand.js\n\t\t//=require provide.js\n\n\t// process initial configuration\n\t\tdemand.configure({ cache: TRUE, base: '/', pattern: { '/demand': functionResolveUrl(((options && options.url) || location.href) + '/../').slice(0, -1)} });\n\t\toptions && options.settings && demand.configure(options.settings);\n\n\t// include additional components\n\t\t//=require function/hash.js\n\t\t//=require class/queue.js\n\t\t//=require class/processor.js\n\t\t//=require handler/module.js\n\t\t//=require handler/bundle.js\n\t\t//=require plugin/genie.js\n\n\t// initialize\n\t\tqueue     = new ClassQueue();\n\t\tprocessor = new ClassProcessor(queue);\n\n\t\tfunction assignModule(id, factory) {\n\t\t\tprovide(id, function() { return factory; });\n\t\t}\n\n\t\tassignModule(MODULE_PREFIX_HANDLER + 'module', handlerModule);\n\t\tassignModule(MODULE_PREFIX_HANDLER + 'bundle', handlerBundle);\n\t\tassignModule(MODULE_PREFIX_PLUGIN + 'genie', pluginGenie);\n\t\tassignModule(MODULE_PREFIX_VALIDATOR + 'isTypeOf', validatorIsTypeOf);\n\t\tassignModule(MODULE_PREFIX_VALIDATOR + 'isArray', validatorIsArray);\n\t\tassignModule(MODULE_PREFIX_VALIDATOR + 'isObject', validatorIsObject);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'resolveUrl', functionResolveUrl);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'merge', functionMerge);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'iterate', functionIterate);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'hash', functionHash);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'defer', functionDefer);\n\t\tassignModule(MODULE_PREFIX_FUNCTION + 'uuid', functionUuid);\n\t\tassignModule(MODULE_PREFIX + 'descriptor', ClassDescriptor);\n\t\tassignModule(MODULE_PREFIX + 'pledge', ClassPledge);\n\t\tassignModule(MODULE_PREFIX + 'queue', ClassQueue);\n\t\tassignModule(MODULE_PREFIX + 'xhr', ClassXhr);\n\t\tassignModule(MODULE_PREFIX + 'failure', ClassFailure);\n\n\t\toptions && options.main && demand(options.main);\n}(this, document, 'demand' in this && demand, setTimeout, clearTimeout));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tUNDEFINED, FALSE\n*/\n\n//=require constants.js\n\n/**\n * iterate\n *\n * Iterate over enumerable & own properties of a given\n * object and pass current property as well as its value\n * to a callback function\n *\n * @param {object} object\n * @param {function} callback\n * @param context\n *\n * @return {object}\n */\n\nfunction functionIterate(object, callback, context) {\n\tvar properties = Object.keys(object),\n\t\ti = 0, property;\n\n\tfor(; (property = properties[i]) !== UNDEFINED; i++) {\n\t\tif(callback.call(context, property, object[property]) === FALSE) {\n\t\t\tbreak;\n\t\t}\n\t}\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tNULL\n*/\n\n//=require constants.js\n\nfunction ClassDescriptor(value, writable, configurable, enumerable) {\n\treturn {\n\t\t__proto__:    NULL,\n\t\tvalue:        value,\n\t\tenumerable:   !!enumerable,\n\t\tconfigurable: !!configurable,\n\t\twritable:     !!writable\n\t};\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\n/**\n * isTypeOf\n *\n * Check whether a given object is of specified type\n *\n * @param object\n * @param {string} type\n *\n * @return {boolean}\n */\n\nfunction validatorIsTypeOf(object, type) {\n\treturn typeof object === type;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_OBJECT,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\n/**\n * isObject\n *\n * Check whether a given object is of type object\n *\n * @param object\n *\n * @return {boolean}\n */\n\nfunction validatorIsObject(object) {\n\treturn object && validatorIsTypeOf(object, STRING_OBJECT);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_NUMBER,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\n/**\n * isPositive\n *\n * Check whether a given value is a positive integer\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsPositive(value) {\n\treturn validatorIsTypeOf(value, STRING_NUMBER) && isFinite(value) && Math.floor(value) === value && value >= 0;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\nfunction functionGetTimestamp() {\n\treturn +new Date();\n}\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tlinkElement\n*/\n\n//=require shortcuts.js\n\nfunction functionResolveUrl(url) {\n\tlinkElement.href = url;\n\n\treturn linkElement.href;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tregexMatchParameter, regexMatchBaseUrl, regexIsAbsolutePath, regexIsAbsoluteUri,\n\tfunctionResolveUrl\n*/\n\n//=require variables.js\n//=require function/resolveUrl.js\n\nfunction functionResolvePath(uri, context) {\n\tvar path = uri.replace(regexMatchParameter, '');\n\n\tif(!regexIsAbsolutePath.test(path) && !regexIsAbsoluteUri.test(path)) {\n\t\tpath = '/' + functionResolveUrl(((context && functionResolveUrl(context + '/../')) || '/') + path).replace(regexMatchBaseUrl, '');\n\t}\n\n\treturn path;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tregexMatchParameter,\n\tfunctionResolvePath\n*/\n\n//=require variables.js\n//=require function/resolvePath.js\n\nfunction functionResolveId(uri, context) {\n\tvar parameter = uri.match(regexMatchParameter);\n\n\treturn ((parameter && parameter[1]) ? 'mock:' : '') + ((parameter && parameter[3]) || settings.handler) + '!' + functionResolvePath(uri, context);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_UNDEFINED,\n\tobjectDefineProperty,\n\tvalidatorIsTypeOf,\n\tfunctionUuid,\n\tClassDescriptor\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require validator/isTypeOf.js\n//=require function/uuid.js\n//=require class/descriptor.js\n\nfunction AbstractUuid() {\n\tif(validatorIsTypeOf(this.uuid, STRING_UNDEFINED)) {\n\t\tobjectDefineProperty(this, 'uuid', new ClassDescriptor(functionUuid()));\n\t}\n\n\treturn this;\n}\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tAbstractUuid\n*/\n\n//=require abstract/uuid.js\n\nfunction ClassRegistry() {\n\tthis.parent.constructor.call(this);\n\n\tstorage[this.uuid] = {};\n}\n\nClassRegistry.prototype = {\n\tget: function(key) {\n\t\treturn key ? storage[this.uuid][key] : storage[this.uuid];\n\t},\n\tset: function(key, value) {\n\t\tstorage[this.uuid][key] = value;\n\t}\n};\n\nClassRegistry.extends(AbstractUuid);","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tDEMAND_ID,\n\tarrayPrototypeSlice\n*/\n\n//=require constants.js\n//=require shortcuts.js\n\nfunction ClassFailure(message, module, stack) {\n\tthis.message = message;\n\t\t\n\tmodule && (this.module = module);\n\tstack && (this.stack = arrayPrototypeSlice.call(stack));\n}\n\t\nClassFailure.prototype = {\n\t/* only for reference\n\t message: NULL,\n\t module:  NULL,\n\t stack:   NULL,\n\t */\n\ttoString: function() {\n\t\tvar self   = this,\n\t\t\tresult = DEMAND_ID + ': ' + self.message + ' ' + (self.module ? '\"' + self.module + '\"' : '');\n\n\t\tif(self.stack) {\n\t\t\tresult = ClassFailure.traverse(self.stack, result, 1);\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n};\n\t\nClassFailure.traverse = function(stack, value, depth) {\n\tvar indention = new Array(depth + 1).join(' '),\n\t\ti = 0, item;\n\t\t\n\tfor(; item = stack[i]; i++) {\n\t\tvalue += '\\n' + indention + '> ' + item.message + ' ' + (item.module ? '\"' + item.module + '\"' : '');\n\t\t\t\n\t\tif(item.stack) {\n\t\t\tvalue = ClassFailure.traverse(item.stack, value, depth + 1);\n\t\t}\n\t}\n\t\t\n\treturn value;\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n \tEVENT_PRE_REQUEST, EVENT_POST_REQUEST, ERROR_LOAD,\n\tregexIsAbsoluteUri,\n\tfunctionIterate, functionResolveUrl,\n\tClassXhr, ClassFailure,\n\tsingletonEvent\n*/\n\n//=require constants.js\n//=require variables.js\n//=require function/resolveUrl.js\n//=require function/iterate.js\n//=require singleton/event.js\n//=require class/xhr.js\n//=require class/failure.js\n\nfunction ClassLoader(dependency) {\n\tvar pattern;\n\n\tfunction resolve(response, type) {\n\t\tif(!dependency.handler.validate || dependency.handler.validate(type)) {\n\t\t\tdependency.source = response;\n\n\t\t\tsingletonEvent.emit(EVENT_POST_REQUEST, dependency.type, dependency);\n\t\t} else {\n\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (content-type)', dependency.id));\n\t\t}\n\t}\n\n\tfunction reject(status) {\n\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + (status ? ' (status)' : ''), dependency.id));\n\t}\n\n\tfunction load(location) {\n\t\tlocation       = location || 0;\n\t\tdependency.url = pattern ? functionResolveUrl(pattern.process(dependency.path, location)) : dependency.path;\n\n\t\tsingletonEvent.emit(EVENT_PRE_REQUEST, dependency.type, dependency);\n\n\t\tnew ClassXhr(dependency.url).then(\n\t\t\tresolve,\n\t\t\t(\n\t\t\t\tpattern ?\n\t\t\t\tfunction() {\n\t\t\t\t\tlocation++;\n\n\t\t\t\t\tif(pattern.location[location]) {\n\t\t\t\t\t\tload(location);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t:\n\t\t\t\treject\n\t\t\t)\n\t\t);\n\t}\n\n\tif(!regexIsAbsoluteUri.test(dependency.path)) {\n\t\tfunctionIterate(settings.pattern, function(property, value) {\n\t\t\tvalue.matches(dependency.path) && (!pattern || pattern.weight < value.weight) && (pattern = value);\n\t\t});\n\t}\n\n\tload();\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tobjectPrototypeToString\n*/\n\n//=require shortcuts.js\n\n/**\n * isArray\n *\n * Check whether a given value is of type array\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsArray(value) {\n\treturn objectPrototypeToString.call(value) === '[object Array]';\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_UNDEFINED,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n\nfunction functionLog(failure) {\n\t/* eslint-disable no-console */\n\tif(!validatorIsTypeOf(console, STRING_UNDEFINED)) {\n\t\tconsole.error(failure.toString());\n\t}\n\t/* eslint-enable no-console */\n\n\treturn failure;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\n/**\n * hash\n *\n * Generate a hash for a given string\n *\n * @param {string} input\n *\n * @return {number}\n */\nfunction functionHash(input){\n\tvar value = 5381,\n\t\ti     = input.length;\n\n\twhile(i) {\n\t\tvalue = (value * 33) ^ input.charCodeAt(--i);\n\t}\n\n\treturn value >>> 0;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tEVENT_QUEUE_ENQUEUE, EVENT_QUEUE_DEQUEUE,\n\tarrayPrototypeSlice,\n\tsingletonEvent,\n\tAbstractUuid\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require singleton/event.js\n//=require abstract/uuid.js\n\nfunction ClassQueue() {\n\tthis.parent.constructor.call(this);\n\n\tstorage[this.uuid] = [];\n}\n\t\nClassQueue.prototype = {\n\tenqueue: function() {\n\t\tstorage[this.uuid] = storage[this.uuid].concat(arrayPrototypeSlice.call(arguments));\n\n\t\tsingletonEvent.emit(EVENT_QUEUE_ENQUEUE, this.uuid);\n\t},\n\tdequeue: function() {\n\t\tsingletonEvent.emit(EVENT_QUEUE_DEQUEUE, this.uuid);\n\n\t\treturn storage[this.uuid].shift();\n\t},\n\tget current() {\n\t\treturn storage[this.uuid][0];\n\t},\n\tget length() {\n\t\treturn storage[this.uuid].length;\n\t}\n};\n\t\nClassQueue.extends(AbstractUuid);","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tEVENT_QUEUE_ENQUEUE, NULL,\n\tsingletonEvent,\n\tAbstractUuid\n*/\n\n//=require constants.js\n//=require singleton/event.js\n//=require abstract/uuid.js\n\nfunction ClassProcessor(queue) {\n\tvar self    = this.parent.constructor.call(this),\n\t\tpointer = storage[self.uuid] = { queue: queue, current: NULL };\n\n\tsingletonEvent\n\t\t.on(EVENT_QUEUE_ENQUEUE + ':' + queue.uuid, function() {\n\t\t\t\t!pointer.current && self.process();\n\t\t});\n}\n\nClassProcessor.prototype = {\n\tprocess: function() {\n\t\tvar pointer = storage[this.uuid],\n\t\t\t\tcurrent;\n\n\t\tif(pointer.queue.length) {\n\t\t\tcurrent = pointer.current = pointer.queue.dequeue();\n\n\t\t\tcurrent.handler.process && current.handler.process.call(current);\n\t\t} else {\n\t\t\tpointer.current = NULL;\n\t\t}\n\t},\n\tget current() {\n\t\treturn storage[this.uuid].current;\n\t}\n};\n\t\nClassProcessor.extends(AbstractUuid);","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tDEMAND_ID,\n\tarrayPrototypeSlice\n*/\n\n//=require constants.js\n//=require shortcuts.js\n\nfunction ClassFailure(message, module, stack) {\n\tthis.message = message;\n\t\t\n\tmodule && (this.module = module);\n\tstack && (this.stack = arrayPrototypeSlice.call(stack));\n}\n\t\nClassFailure.prototype = {\n\t/* only for reference\n\t message: NULL,\n\t module:  NULL,\n\t stack:   NULL,\n\t */\n\ttoString: function() {\n\t\tvar self   = this,\n\t\t\tresult = DEMAND_ID + ': ' + self.message + ' ' + (self.module ? '\"' + self.module + '\"' : '');\n\n\t\tif(self.stack) {\n\t\t\tresult = ClassFailure.traverse(self.stack, result, 1);\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n};\n\t\nClassFailure.traverse = function(stack, value, depth) {\n\tvar indention = new Array(depth + 1).join(' '),\n\t\ti = 0, item;\n\t\t\n\tfor(; item = stack[i]; i++) {\n\t\tvalue += '\\n' + indention + '> ' + item.message + ' ' + (item.module ? '\"' + item.module + '\"' : '');\n\t\t\t\n\t\tif(item.stack) {\n\t\t\tvalue = ClassFailure.traverse(item.stack, value, depth + 1);\n\t\t}\n\t}\n\t\t\n\treturn value;\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\nvar arrayPrototype                 = Array.prototype,\n\tarrayPrototypeSlice            = arrayPrototype.slice,\n\tarrayPrototypeConcat           = arrayPrototype.concat,\n\tobjectPrototype                = Object.prototype,\n\tobjectPrototypeToString        = objectPrototype.toString,\n\tobjectCreate                   = Object.create,\n\tobjectDefineProperty           = Object.defineProperty,\n\tobjectGetOwnPropertyNames      = Object.getOwnPropertyNames,\n\tobjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,\n\tfunctionPrototype              = Function.prototype,\n\tlinkElement                    = document.createElement('a');","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\nvar DEMAND_ID               = 'demand',\n\tPROVIDE_ID              = 'provide',\n\tPATH_ID                 = 'path',\n\tMODULE_PREFIX           = '/' + DEMAND_ID + '/',\n\tMODULE_PREFIX_HANDLER   = MODULE_PREFIX + 'handler/',\n\tMODULE_PREFIX_PLUGIN    = MODULE_PREFIX + 'plugin/',\n\tMODULE_PREFIX_FUNCTION  = MODULE_PREFIX + 'function/',\n\tMODULE_PREFIX_VALIDATOR = MODULE_PREFIX + 'validator/',\n\tMOCK_PREFIX             = 'mock:',\n\tNULL                    = null,\n\tUNDEFINED               = undefined,\n\tFALSE                   = false,\n\tTRUE                    = true,\n\tSTRING_UNDEFINED        = 'undefined',\n\tSTRING_STRING           = 'string',\n\tSTRING_BOOLEAN          = 'boolean',\n\tSTRING_OBJECT           = 'object',\n\tSTRING_FUNCTION         = 'function',\n\tSTRING_NUMBER           = 'number',\n\tFUNCTION_EMPTY          = function() {},\n\tEVENT_PREFIX            = 'pre',\n\tEVENT_POSTFIX           = 'post',\n\tEVENT_CONFIGURE         = 'Configure',\n\tEVENT_PRE_CONFIGURE     = EVENT_PREFIX + EVENT_CONFIGURE,\n\tEVENT_POST_CONFIGURE    = EVENT_POSTFIX + EVENT_CONFIGURE,\n\tEVENT_CACHE             = 'cache',\n\tEVENT_CACHE_MISS        = EVENT_CACHE + 'Miss',\n\tEVENT_CACHE_HIT         = EVENT_CACHE + 'Hit',\n\tEVENT_CACHE_CLEAR       = EVENT_CACHE + 'Clear',\n\tEVENT_CACHE_EXCEED      = EVENT_CACHE + 'Exceed',\n\tEVENT_PRE_CACHE         = EVENT_PREFIX + 'Cache',\n\tEVENT_POST_CACHE        = EVENT_POSTFIX + 'Cache',\n\tEVENT_RESOLVE           = 'Resolve',\n\tEVENT_PRE_RESOLVE       = EVENT_PREFIX + EVENT_RESOLVE,\n\tEVENT_POST_RESOLVE      = EVENT_POSTFIX + EVENT_RESOLVE,\n\tEVENT_REQUEST           = 'Request',\n\tEVENT_PRE_REQUEST       = EVENT_PREFIX + EVENT_REQUEST,\n\tEVENT_POST_REQUEST      = EVENT_POSTFIX + EVENT_REQUEST,\n\tEVENT_PROCESS           = 'Process',\n\tEVENT_PRE_PROCESS       = EVENT_PREFIX + EVENT_PROCESS,\n\tEVENT_POST_PROCESS      = EVENT_POSTFIX + EVENT_PROCESS,\n\tEVENT_QUEUE             = 'queue',\n\tEVENT_QUEUE_ENQUEUE     = EVENT_QUEUE + 'Enqueue',\n\tEVENT_QUEUE_DEQUEUE     = EVENT_QUEUE + 'Dequeue',\n\tERROR_LOAD              = 'error loading',\n\tERROR_PROVIDE           = 'error providing',\n\tERROR_RESOLVE           = 'error resolving',\n\tERROR_PROVIDE_ANONYMOUS = 'unspecified anonymous provide';","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tobjectCreate, objectDefineProperty, objectGetOwnPropertyNames, objectGetOwnPropertyDescriptor, functionPrototype,\n\tfunctionIterate,\n\tClassDescriptor\n*/\n\n//=require shortcuts.js\n//=require function/iterate.js\n//=require class/descriptor.js\n\n(function() {\n\tfunction extend(parent) {\n\t\tvar self       = this,\n\t\t\tprototype  = self.prototype,\n\t\t\tproperties = {};\n\n\t\tparent = parent.prototype || parent;\n\n\t\tobjectGetOwnPropertyNames(prototype).forEach(function(property) {\n\t\t\tproperties[property] = objectGetOwnPropertyDescriptor(prototype, property);\n\t\t});\n\n\t\tproperties.constructor = new ClassDescriptor(self);\n\t\tproperties.parent      = new ClassDescriptor(parent);\n\n\t\tself.prototype = objectCreate(parent, properties);\n\n\t\treturn self;\n\t}\n\n\tobjectDefineProperty(functionPrototype, 'extends', new ClassDescriptor(extend));\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tUNDEFINED,\n\tvalidatorIsObject,\n\tfunctionIterate\n*/\n\n//=require constants.js\n//=require validator/isObject.js\n//=require function/iterate.js\n\n/**\n * merge\n *\n * Merge two or more objects into the first one passed in\n *\n * @param {...object} object\n *\n * @return {object}\n */\nvar functionMerge = (function() {\n\tfunction mergeProperties(property, value) {\n\t\tvar targetProperty = this[property],\n\t\t\ttargetPropertyIsObject;\n\n\t\tif(value !== UNDEFINED) {\n\t\t\tif(validatorIsObject(value)) {\n\t\t\t\ttargetPropertyIsObject = validatorIsObject(targetProperty);\n\n\t\t\t\tif(value.length !== UNDEFINED) {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length !== UNDEFINED) ? targetProperty : [];\n\t\t\t\t} else {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length === UNDEFINED) ? targetProperty : {};\n\t\t\t\t}\n\n\t\t\t\tthis[property] = functionMerge(targetProperty, value);\n\t\t\t} else {\n\t\t\t\tthis[property] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn function functionMerge() {\n\t\tvar target = arguments[0],\n\t\t\ti = 1, properties;\n\n\t\tfor(; (properties = arguments[i]) !== UNDEFINED; i++) {\n\t\t\tfunctionIterate(properties, mergeProperties, target);\n\t\t}\n\n\t\treturn target;\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\nvar functionUuid = (function() {\n\tvar regex   = new RegExp('[xy]', 'g'),\n\t\tstorage = {};\n\n\tfunction randomize(character) {\n\t\tvar r = Math.random() * 16 | 0;\n\n\t\treturn ((character === 'x') ? r : (r & 0x3 | 0x8)).toString(16);\n\t}\n\n\treturn function functionUuid() {\n\t\tvar uuid;\n\n\t\tdo {\n\t\t\tuuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(regex, randomize);\n\t\t} while(storage[uuid]);\n\n\t\tstorage[uuid] = 1;\n\n\t\treturn uuid;\n\t};\n}());","/**\n * Based on setAsap:\n *   Repo:    https://github.com/taylorhakes/setAsap\n *   License: https://github.com/taylorhakes/setAsap/blob/master/LICENSE\n */\n\n/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tNULL, TRUE, FALSE,\n\tfunctionUuid\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require function/uuid.js\n\n/**\n * defer\n *\n * delay function execution like setImmediate does\n *\n * @param {function} function\n */\nvar functionDefer = (function() {\n\tvar hasSetImmediate = 'setImmediate' in global,\n\t\telement, fallback;\n\n\tif('MutationObserver' in global) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement = document.createElement('div');\n\n\t\t\tnew MutationObserver(function() { fn(); })\n\t\t\t\t.observe(element, { attributes: TRUE });\n\n\t\t\telement.setAttribute('i', '1');\n\t\t};\n\t}\n\n\tif(!hasSetImmediate && 'postMessage' in global && !('importScripts' in global) && 'addEventListener' in global) {\n\t\treturn (function() {\n\t\t\tfunction onMessage(event) {\n\t\t\t\tif(event.source === global && event.data && storage[event.data]) {\n\t\t\t\t\tstorage[event.data]();\n\n\t\t\t\t\tdelete storage[event.data];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tglobal.addEventListener('message', onMessage, FALSE);\n\n\t\t\treturn function functionDefer(fn) {\n\t\t\t\tvar uuid = functionUuid();\n\n\t\t\t\tstorage[uuid] = fn;\n\n\t\t\t\tglobal.postMessage(uuid, '*');\n\t\t\t};\n\t\t}());\n\t}\n\n\tif(!hasSetImmediate && 'onreadystatechange' in (element = document.createElement('script'))) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement.onreadystatechange = function onreadystatechange() {\n\t\t\t\telement.onreadystatechange = NULL;\n\t\t\t\telement.parentNode.removeChild(element);\n\n\t\t\t\tfn();\n\t\t\t};\n\n\t\t\tdocument.body.appendChild(element);\n\t\t};\n\t}\n\n\t/* eslint-disable no-undef */\n\tfallback = hasSetImmediate ? setImmediate : setTimeout;\n\t/* eslint-enable no-undef */\n\n\treturn function functionDefer(fn) {\n\t\tfallback(fn);\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tNULL, STRING_STRING, STRING_FUNCTION, EVENT_POST_CONFIGURE,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require validator/isTypeOf.js\n\nvar singletonEvent = (function() {\n\tvar regexMatchEvent = /^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,\n\t\tlistener        = {};\n\n\tfunction Event() {}\n\n\tEvent.prototype = {\n\t\temit: function (event, filter) {\n\t\t\tvar pointer = listener[event],\n\t\t\t\tparameter, i, item;\n\n\t\t\tif(pointer) {\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 2);\n\n\t\t\t\tfor(i = 0; (item = pointer[i]); i++) {\n\t\t\t\t\tif(!item.filter || item.filter === filter) {\n\t\t\t\t\t\titem.callback.apply(NULL, parameter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\ton: function(events, callback) {\n\t\t\tvar event, pointer;\n\n\t\t\tif(validatorIsTypeOf(events, STRING_STRING) && validatorIsTypeOf(callback, STRING_FUNCTION)) {\n\t\t\t\tevents = events.split(' ');\n\n\t\t\t\twhile(event = events.shift()) {\n\t\t\t\t\tevent = event.split(':');\n\n\t\t\t\t\tif(regexMatchEvent.test(event[0])) {\n\t\t\t\t\t\t(listener[event[0]] || (listener[event[0]] = [])).push({ callback: callback, filter: event[1] });\n\n\t\t\t\t\t\tif(event[0] === EVENT_POST_CONFIGURE && (pointer = settings.modules[event[1]])) {\n\t\t\t\t\t\t\tcallback(pointer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\treturn new Event();\n}());\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage\n*/\n\nvar functionEscapeRegex = (function() {\n\tvar regexMatchRegex = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n\n\treturn function functionEscapeRegex(value) {\n\t\treturn value.replace(regexMatchRegex, '\\\\$&');\n\t};\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tDEMAND_ID, PROVIDE_ID, PATH_ID,\n\tfunctionEscapeRegex, functionResolveUrl\n*/\n\n//=require constants.js\n//=require function/escapeRegex.js\n//=require function/resolveUrl.js\n\nvar regexIsAbsoluteUri  = /^(http(s?):)?\\/\\//i,\n\tregexIsAbsolutePath = /^\\//,\n\tregexMatchSourcemap = /\\/\\/#\\s+sourceMappingURL\\s*=\\s*(?!(?:http[s]?:)?\\/\\/)(.+?)\\.map/g,\n\tregexMatchBaseUrl   = new RegExp('^' + functionEscapeRegex(functionResolveUrl('/'))),\n\tregexMatchInternal  = new RegExp('^' + DEMAND_ID + '|' + PROVIDE_ID + '|' + PATH_ID + '$'),\n\tregexMatchParameter = /^(mock:)?([+-])?((?:[-\\w]+\\/?)+)?(?:@(\\d+\\.\\d+.\\d+))?(?:#(\\d+))?!/;","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tDEMAND_ID, FUNCTION_EMPTY, EVENT_POST_PROCESS, EVENT_CACHE_HIT, EVENT_CACHE_MISS, EVENT_CACHE_EXCEED, EVENT_CACHE_CLEAR, EVENT_PRE_CACHE, EVENT_PRE_CACHE, EVENT_POST_CACHE, STRING_STRING, NULL, FALSE, TRUE,\n\tvalidatorIsTypeOf,\n\tfunctionGetTimestamp, functionEscapeRegex, functionIterate, functionDefer, functionResolveId,\n\tClassDependency,\n\tsingletonEvent\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n//=require function/getTimestamp.js\n//=require function/escapeRegex.js\n//=require function/iterate.js\n//=require function/defer.js\n//=require function/resolveId.js\n//=require singleton/event.js\n\nvar singletonCache = (function(JSON) {\n\tvar STORAGE_PREFIX         = '[' + DEMAND_ID + ']',\n\t\tSTORAGE_SUFFIX_STATE   = '[state]',\n\t\tSTORAGE_SUFFIX_VALUE   = '[value]',\n\t\tregexMatchState        = new RegExp('^' + functionEscapeRegex(STORAGE_PREFIX) + '\\\\[(.+?)\\\\]' + functionEscapeRegex(STORAGE_SUFFIX_STATE) + '$'),\n\t\tsupportsLocalStorage   = (function() { try { return 'localStorage' in global && global.localStorage; } catch(exception) { return FALSE; } }()),\n\t\tsupportsRemainingSpace = supportsLocalStorage && 'remainingSpace' in localStorage,\n\t\tcache;\n\n\tsingletonEvent\n\t\t.on(EVENT_POST_PROCESS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tdependency.source && cache.set(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tcache.clear.path(dependency.id);\n\t\t\t});\n\t\t});\n\n\tfunction cachingEnabled(dependency) {\n\t\tvar match;\n\n\t\tif(dependency.cache !== NULL) {\n\t\t\treturn dependency.cache;\n\t\t}\n\n\t\tfunctionIterate(settings.cache, function(property, value) {\n\t\t\tif(dependency.path.indexOf(property) === 0 && (!match || value.weight > match.weight)) {\n\t\t\t\tmatch = value;\n\t\t\t}\n\t\t});\n\n\t\treturn match ? match.state : FALSE;\n\n\t}\n\n\tfunction emit(event, dependency, state) {\n\t\tsingletonEvent.emit(event, dependency.id, dependency, state);\n\t}\n\n\tfunction Cache() {}\n\n\tCache.prototype = {\n\t\tget: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function get(dependency) {\n\t\t\t\t\tvar id, state;\n\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tid    = STORAGE_PREFIX + '[' + dependency.id + ']';\n\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(id + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\tif(state && state.version === dependency.version && ((!state.expires && !dependency.lifetime) || state.expires > functionGetTimestamp())) {\n\t\t\t\t\t\t\tdependency.source = localStorage.getItem(id + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\t\treturn TRUE;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}()),\n\t\tresolve: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function resolve(dependency) {\n\t\t\t\t\tif(this.get(dependency)) {\n\t\t\t\t\t\temit(EVENT_CACHE_HIT, dependency);\n\t\t\t\t\t} else {\n\t\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn function resolve(dependency) {\n\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t};\n\t\t\t}\n\t\t}()),\n\t\tset: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function set(dependency) {\n\t\t\t\t\tvar state;\n\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tstate = { version: dependency.version, expires: dependency.lifetime ? functionGetTimestamp() + dependency.lifetime : dependency.lifetime };\n\n\t\t\t\t\t\temit(EVENT_PRE_CACHE, dependency, state);\n\n\t\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\t\tvar id = STORAGE_PREFIX + '[' + dependency.id + ']',\n\t\t\t\t\t\t\t\tspaceBefore;\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tspaceBefore = supportsRemainingSpace ? localStorage.remainingSpace : NULL;\n\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_VALUE, dependency.source);\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_STATE, JSON.stringify(state));\n\n\t\t\t\t\t\t\t\t// strict equality check with \"===\" is required due to spaceBefore might be \"0\"\n\t\t\t\t\t\t\t\tif(spaceBefore !== NULL && localStorage.remainingSpace === spaceBefore) {\n\t\t\t\t\t\t\t\t\tthrow new Error('QUOTA_EXCEEDED_ERR');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\temit(EVENT_POST_CACHE, dependency, state);\n\t\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\t\temit(EVENT_CACHE_EXCEED, dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}()),\n\t\tclear: {\n\t\t\tpath: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function path(path) {\n\t\t\t\t\t\tvar id  = functionResolveId(path),\n\t\t\t\t\t\t\tkey = STORAGE_PREFIX + '[' + id + ']';\n\n\t\t\t\t\t\tif(localStorage[key + STORAGE_SUFFIX_STATE]) {\n\t\t\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_STATE);\n\t\t\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\t\t\temit(EVENT_CACHE_CLEAR, ClassDependency.get(id) || new ClassDependency(id, NULL, FALSE));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}()),\n\t\t\tall: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function all() {\n\t\t\t\t\t\tvar match;\n\n\t\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\t\tmatch && this.path(match[1]);\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}()),\n\t\t\texpired: (function() {\n\t\t\t\tif(supportsLocalStorage) {\n\t\t\t\t\treturn function expired() {\n\t\t\t\t\t\tvar match, state;\n\n\t\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\t\tif(match) {\n\t\t\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '[' + match[1] + ']' + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\t\t\tif(state && state.expires > 0 && state.expires <= functionGetTimestamp()) {\n\t\t\t\t\t\t\t\t\tthis.path(match[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t\t}\n\t\t\t}())\n\t\t}\n\t};\n\n\treturn (cache = new Cache());\n}(JSON));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n \tFUNCTION_EMPTY, NULL,\n\tarrayPrototypeSlice, arrayPrototypeConcat,\n\tfunctionDefer, functionUuid,\n\tAbstractUuid\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require function/defer.js\n//=require function/uuid.js\n//=require abstract/uuid.js\n\nvar ClassPledge = (function() {\n\tvar PLEDGE_PENDING  = 'pending',\n\t\tPLEDGE_RESOLVED = 'resolved',\n\t\tPLEDGE_REJECTED = 'rejected',\n\t\tstorage         = {};\n\n\tfunction resolve() {\n\t\tstorage[this.uuid].handle(PLEDGE_RESOLVED, arguments);\n\t}\n\n\tfunction reject() {\n\t\tstorage[this.uuid].handle(PLEDGE_REJECTED, arguments);\n\t}\n\n\tfunction handle(state, parameter) {\n\t\tvar properties = storage[this.uuid],\n\t\t\tpointer, result;\n\n\t\tif(properties.state === PLEDGE_PENDING) {\n\t\t\tproperties.state = state;\n\t\t\tproperties.value = parameter;\n\t\t}\n\n\t\twhile(pointer = properties[properties.state].shift()) {\n\t\t\tresult = pointer.handler.apply(NULL, properties.value);\n\n\t\t\tif(result && typeof result.then === 'function') {\n\t\t\t\tresult.then(pointer.deferred.resolve, pointer.deferred.reject);\n\t\t\t} else {\n\t\t\t\tpointer.deferred[properties.state === PLEDGE_RESOLVED ? 'resolve' : 'reject'].apply(NULL, properties.value);\n\t\t\t}\n\t\t}\n\n\t\tproperties[PLEDGE_RESOLVED].length = 0;\n\t\tproperties[PLEDGE_REJECTED].length = 0;\n\t}\n\n\tfunction observe(pledge, index, properties) {\n\t\tpledge.then(\n\t\t\tfunction() {\n\t\t\t\tproperties.resolved[index] = arrayPrototypeSlice.call(arguments);\n\n\t\t\t\tproperties.count++;\n\n\t\t\t\tcheck(properties);\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tproperties.rejected.push(arrayPrototypeSlice.call(arguments));\n\n\t\t\t\tcheck(properties);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction check(properties) {\n\t\tif(properties.count === properties.total) {\n\t\t\tproperties.deferred.resolve.apply(NULL, arrayPrototypeConcat.apply([], properties.resolved));\n\t\t} else if(properties.rejected.length + properties.count === properties.total) {\n\t\t\tproperties.deferred.reject.apply(NULL, arrayPrototypeConcat.apply([], properties.rejected));\n\t\t}\n\t}\n\n\tfunction ClassPledge(executor) {\n\t\tvar self = this.parent.constructor.call(this);\n\n\t\tstorage[self.uuid] = { state: PLEDGE_PENDING, handle: handle.bind(self), value: NULL, resolved: [], rejected: [], count: 0 };\n\n\t\texecutor(resolve.bind(self), reject.bind(self));\n\t}\n\n\tClassPledge.prototype = {\n\t\t'catch': function(listener) {\n\t\t\treturn this.then(FUNCTION_EMPTY, listener);\n\t\t},\n\t\talways: function(alwaysListener) {\n\t\t\treturn this.then(alwaysListener, alwaysListener);\n\t\t},\n\t\tthen: function(resolveListener, rejectListener) {\n\t\t\tvar properties = storage[this.uuid],\n\t\t\t\tdeferred   = ClassPledge.defer();\n\n\t\t\tresolveListener && properties[PLEDGE_RESOLVED].push({ handler: resolveListener, deferred: deferred });\n\t\t\trejectListener && properties[PLEDGE_REJECTED].push({ handler: rejectListener, deferred: deferred });\n\n\t\t\tif(properties.state !== PLEDGE_PENDING) {\n\t\t\t\tfunctionDefer(properties.handle);\n\t\t\t}\n\n\t\t\treturn deferred.pledge;\n\t\t},\n\t\tisPending: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_PENDING;\n\t\t},\n\t\tisResolved: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_RESOLVED;\n\t\t},\n\t\tisRejected: function() {\n\t\t\treturn storage[this.uuid].state === PLEDGE_REJECTED;\n\t\t}\n\t};\n\n\tClassPledge.defer = function() {\n\t\tvar self = {};\n\n\t\tself.pledge = new ClassPledge(function(resolveListener, rejectListener) {\n\t\t\tself.resolve = resolveListener;\n\t\t\tself.reject  = rejectListener;\n\t\t});\n\n\t\treturn self;\n\t};\n\n\tClassPledge.all = function(pledges) {\n\t\tvar deferred   = ClassPledge.defer(),\n\t\t\tproperties = (storage[functionUuid()] = { deferred: deferred, resolved: [], rejected: [], total: pledges.length, count: 0 }),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tobserve(pledge, i, properties)\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\tClassPledge.race = function(pledges) {\n\t\tvar deferred = ClassPledge.defer(),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tpledge.then(deferred.resolve, deferred.reject);\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\treturn ClassPledge.extends(AbstractUuid);\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tMODULE_PREFIX_HANDLER, ERROR_LOAD, DEMAND_ID, PROVIDE_ID, PATH_ID, MOCK_PREFIX, NULL, TRUE, FALSE,\n\tregexMatchInternal, regexMatchParameter,\n\tvalidatorIsPositive,\n\tfunctionResolvePath, functionResolveId, functionResolveUrl, functionIterate,\n\tClassRegistry, ClassPledge, ClassFailure,\n\tsingletonCache\n*/\n\n//=require constants.js\n//=require variables.js\n//=require validator/isPositive.js\n//=require function/resolvePath.js\n//=require function/resolveId.js\n//=require function/resolveUrl.js\n//=require function/iterate.js\n//=require class/registry.js\n//=require class/pledge.js\n//=require class/failure.js\n//=require singleton/cache.js\n\nvar ClassDependency = (function() {\n\tvar registry    = new ClassRegistry(),\n\t\tplaceholder = [];\n\n\tfunction ClassDependency(uri, context, register) {\n\t\tvar self      = this,\n\t\t\tparameter = uri.match(regexMatchParameter) || placeholder;\n\n\t\tself.path     = functionResolvePath(uri, context);\n\t\tself.mock     = parameter[1] ? TRUE : FALSE;\n\t\tself.cache    = parameter[2] ? parameter[1] === '+' : NULL;\n\t\tself.type     = parameter[3] || settings.handler;\n\t\tself.version  = parameter[4] || settings.version;\n\t\tself.lifetime = (parameter[5] && parameter[5] * 1000) || settings.lifetime;\n\t\tself.id       = (self.mock ? MOCK_PREFIX : '' ) + self.type + '!' + self.path;\n\t\tself.uri      = (self.mock ? MOCK_PREFIX : '' ) + self.type + '@' + self.version + (validatorIsPositive(self.lifetime) && self.lifetime > 0 ? '#' + self.lifetime : '' ) + '!' + self.path;\n\t\tself.deferred = ClassPledge.defer();\n\t\tself.pledge   = self.deferred.pledge;\n\n\t\t(register !== FALSE) && registry.set(self.id, self);\n\n\t\treturn self;\n\t}\n\n\t/* only for reference\n\t ClassDependency.prototype = {\n\t \tpath:     NULL,\n\t \tmock:     NULL,\n\t\tcache:    NULL,\n\t\ttype:     NULL,\n\t\tversion:  NULL,\n\t\tlifetime: NULL,\n\t \tid:       NULL,\n\t \turi:      NULL,\n\t\tdeferred: NULL,\n\t\tpledge:   NULL,\n\t\thandler:  NULL, // set by Dependency.resolve\n\t \tsource:   NULL, // set by Cache or Loader\n\t \turl:      NULL, // optional, set by Loader\n\t\tdelay:    NULL, // optional, set by handler\n\t};\n\t*/\n\n\tClassDependency.get = function(uri, context) {\n\t\treturn registry.get(functionResolveId(uri, context));\n\t};\n\n\tClassDependency.resolve = function(uri, context) {\n\t\tvar dependency = this.get(uri, context);\n\n\t\tif(!dependency) {\n\t\t\tdependency = new ClassDependency(uri, context);\n\n\t\t\tif(context && regexMatchInternal.test(uri)) {\n\t\t\t\tswitch(uri) {\n\t\t\t\t\tcase DEMAND_ID:\n\t\t\t\t\t\tdependency.deferred.resolve((function() {\n\t\t\t\t\t\t\tvar scopedDemand = demand.bind(context);\n\n\t\t\t\t\t\t\tfunctionIterate(demand, function(property, value) {\n\t\t\t\t\t\t\t\tscopedDemand[property] = value;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn scopedDemand;\n\t\t\t\t\t\t}()));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PROVIDE_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(provide.bind(context));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PATH_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(context);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdemand(MODULE_PREFIX_HANDLER + dependency.type)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(handler) {\n\t\t\t\t\t\t\tdependency.handler = handler;\n\n\t\t\t\t\t\t\tif(dependency.mock) {\n\t\t\t\t\t\t\t\tdependency.deferred.resolve(handler);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsingletonCache.resolve(dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (handler)', self.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn dependency;\n\t};\n\n\tClassDependency.list = {\n\t\tall: function() {\n\t\t\treturn Object.keys(registry.get());\n\t\t},\n\t\tpending:  function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isPending()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\tresolved: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isResolved()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\trejected: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isRejected()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t}\n\t};\n\n\treturn ClassDependency;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tfunctionResolveUrl, functionEscapeRegex, functionIterate\n*/\n\n//=require function/resolveUrl.js\n//=require function/escapeRegex.js\n//=require function/iterate.js\n\nvar ClassPattern = (function() {\n\tvar regexMatchTrailingSlash = /(.+)\\/$/;\n\n\tfunction ClassPattern(pattern, url) {\n\t\tvar self = this;\n\n\t\tself.weight   = pattern.length;\n\t\tself.match    = new RegExp('^' + functionEscapeRegex(pattern));\n\t\tself.location = [].concat(url);\n\n\t\tfunctionIterate(self.location, function(property, value) {\n\t\t\tself.location[property] = {\n\t\t\t\turl:   functionResolveUrl(value).replace(regexMatchTrailingSlash, '$1'),\n\t\t\t\tmatch: new RegExp('^' + functionEscapeRegex(value))\n\t\t\t};\n\t\t});\n\t}\n\n\tClassPattern.prototype = {\n\t\t/* only for reference\n\t\t weight:   0,\n\t\t match:    NULL,\n\t\t location: NULL,\n\t\t */\n\t\tmatches: function(path) {\n\t\t\treturn this.match.test(path);\n\t\t},\n\t\tprocess: function(path, index) {\n\t\t\tvar current = this.location[index];\n\n\t\t\tif(current) {\n\t\t\t\treturn path.replace(this.match, current.url);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn ClassPattern;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tTRUE,\n\tregexMatchBaseUrl,\n\tClassPledge\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require variables.js\n//=require class/pledge.js\n\nvar ClassXhr = (function(XMLHttpRequest) {\n\tvar XDomainRequest = 'XDomainRequest' in global && global.XDomainRequest || XMLHttpRequest;\n\t\n\tfunction checkState() {\n\t\tif(this.readyState < 4) {\n\t\t\tthis.abort();\n\t\t}\n\t}\n\t\n\treturn function ClassXhr(url) {\n\t\tvar boundCheckState = checkState.bind(this),\n\t\t\tdeferred        = ClassPledge.defer(),\n\t\t\txhr             = regexMatchBaseUrl.test(url) ? new XMLHttpRequest() : new XDomainRequest(),\n\t\t\ttimeout         = settings.timeout,\n\t\t\tpointer;\n\n\t\txhr.ontimeout = xhr.onerror = xhr.onabort = function() {\n\t\t\tdeferred.reject(xhr.status);\n\t\t};\n\t\txhr.onprogress = xhr.onreadystatechange = function() {\n\t\t\tclearTimeout(pointer);\n\n\t\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t};\n\t\txhr.onload = function() {\n\t\t\ttimeout = clearTimeout(timeout);\n\n\t\t\tif(!('status' in xhr) || xhr.status === 200) {\n\t\t\t\tdeferred.resolve(xhr.responseText, xhr.getResponseHeader && xhr.getResponseHeader('content-type'));\n\t\t\t} else {\n\t\t\t\tdeferred.reject(xhr.status);\n\t\t\t}\n\t\t};\n\n\t\txhr.open('GET', url, TRUE);\n\t\txhr.send();\n\t\t\n\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t\n\t\treturn deferred.pledge;\n\t};\n}(XMLHttpRequest));","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_BOOLEAN, STRING_STRING, EVENT_PRE_RESOLVE, EVENT_POST_RESOLVE, EVENT_PRE_CONFIGURE, EVENT_POST_CONFIGURE, EVENT_CACHE_MISS, EVENT_CACHE_HIT, EVENT_PRE_REQUEST, EVENT_POST_REQUEST, EVENT_PRE_PROCESS, EVENT_POST_PROCESS, NULL, FALSE,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf, validatorIsObject, validatorIsPositive,\n\tfunctionIterate, functionMerge, functionDefer,\n\tClassPledge, ClassDependency, ClassPattern, ClassLoader, \n\tsingletonEvent, singletonCache\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require validator/isTypeOf.js\n//=require validator/isObject.js\n//=require validator/isPositive.js\n//=require function/iterate.js\n//=require function/merge.js\n//=require function/defer.js\n//=require singleton/event.js\n//=require singleton/cache.js\n//=require class/pledge.js\n//=require class/dependency.js\n//=require class/pattern.js\n//=require class/loader.js\n\nglobal.demand = (function() {\n\tfunction demand() {\n\t\tvar dependencies = arrayPrototypeSlice.call(arguments),\n\t\t\tcontext      = this !== global ? this : NULL,\n\t\t\ti = 0, uri;\n\n\t\tsingletonEvent.emit(EVENT_PRE_RESOLVE, NULL, dependencies, context);\n\n\t\tfor(; (uri = dependencies[i]); i++) {\n\t\t\tdependencies[i] = ClassDependency.resolve(uri, context).pledge;\n\t\t}\n\n\t\treturn ClassPledge.all(dependencies).always(function() {\n\t\t\tsingletonEvent.emit(EVENT_POST_RESOLVE, NULL, dependencies, context);\n\t\t});\n\t}\n\n\tdemand.configure = function(options) {\n\t\tvar cache    = options.cache,\n\t\t\tversion  = options.version,\n\t\t\ttimeout  = options.timeout,\n\t\t\tlifetime = options.lifetime,\n\t\t\tbase     = options.base,\n\t\t\tpattern  = options.pattern,\n\t\t\tmodules  = options.modules,\n\t\t\tpointer  = settings.modules,\n\t\t\ttemp;\n\n\t\tif(validatorIsTypeOf(cache, STRING_BOOLEAN)) {\n\t\t\tsettings.cache[''] = { weight: 0, state: cache };\n\t\t} else if(validatorIsObject(cache)) {\n\t\t\tfunctionIterate(cache, function(property, value) {\n\t\t\t\tsettings.cache[property] = { weight: property.length, state: value };\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsTypeOf(version, STRING_STRING)) {\n\t\t\tsettings.version = version;\n\t\t}\n\n\t\tif(validatorIsPositive(timeout)) {\n\t\t\tsettings.timeout = Math.min(Math.max(timeout, 2), 12) * 1000;\n\t\t}\n\n\t\tif(validatorIsPositive(lifetime) && lifetime > 0) {\n\t\t\tsettings.lifetime = lifetime * 1000;\n\t\t}\n\n\t\tif(validatorIsTypeOf(base, STRING_STRING) && base !== '') {\n\t\t\tsettings.pattern.base = new ClassPattern('', base);\n\t\t}\n\n\t\tif(validatorIsObject(pattern)) {\n\t\t\tfunctionIterate(pattern, function(property, value) {\n\t\t\t\tproperty !== 'base' && (settings.pattern[property] = new ClassPattern(property, value));\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsObject(modules)) {\n\t\t\tfunctionIterate(modules, function(property, value) {\n\t\t\t\ttemp = pointer[property] = pointer[property] || {};\n\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_CONFIGURE, property, temp);\n\n\t\t\t\tfunctionMerge(temp, value);\n\n\t\t\t\tsingletonEvent.emit(EVENT_POST_CONFIGURE, property, temp);\n\t\t\t});\n\t\t}\n\n\t\treturn demand;\n\t};\n\n\tdemand.on    = singletonEvent.on.bind(demand);\n\tdemand.list  = ClassDependency.list;\n\tdemand.clear = singletonCache.clear;\n\n\tdemand\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tnew ClassLoader(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_HIT + ' ' + EVENT_POST_REQUEST, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_PROCESS, dependency.id, dependency)\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_PRE_REQUEST, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPreRequest;\n\n\t\t\tpointer && pointer.call(dependency);\n\t\t})\n\t\t.on(EVENT_POST_REQUEST, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPostRequest;\n\n\t\t\tpointer && pointer.call(dependency);\n\t\t})\n\t\t.on(EVENT_PRE_PROCESS, function(dependency) {\n\t\t\tvar pointer = dependency.handler.onPreProcess,\n\t\t\t\tenqueue = (dependency.handler.enqueue !== FALSE) ? functionDefer.bind(NULL, function() { queue.enqueue(dependency); }) : NULL;\n\n\t\t\tpointer && pointer.call(dependency);\n\n\t\t\tdependency.pledge.then(function() {\n\t\t\t\tsingletonEvent.emit(EVENT_POST_PROCESS, dependency.id, dependency);\n\t\t\t});\n\n\t\t\tif(enqueue) {\n\t\t\t\tif(dependency.delay) {\n\t\t\t\t\tdependency.delay.then(enqueue);\n\t\t\t\t} else {\n\t\t\t\t\tenqueue();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\treturn demand;\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tSTRING_STRING, STRING_FUNCTION, ERROR_PROVIDE, ERROR_PROVIDE_ANONYMOUS, NULL,\n\tvalidatorIsTypeOf, validatorIsArray, functionLog,\n\tClassDependency, ClassFailure\n*/\n\n//=require constants.js\n//=require validator/isTypeOf.js\n//=require validator/isArray.js\n//=require function/log.js\n//=require class/dependency.js\n//=require class/failure.js\n\nglobal.provide = function provide() {\n\tvar uri          = validatorIsTypeOf(arguments[0], STRING_STRING) ? arguments[0] : NULL,\n\t\tcontext      = this !== global ? this : NULL,\n\t\tdependencies = validatorIsArray(arguments[uri ? 1 : 0]) ? arguments[uri ? 1 : 0] : NULL,\n\t\tdefinition   = dependencies ? arguments[uri ? 2 : 1] : arguments[uri ? 1 : 0],\n\t\tmodule, isFunction;\n\n\tif(!uri && processor.current) {\n\t\tmodule = processor.current;\n\t\turi    = module.uri;\n\n\t\tprocessor.process();\n\t}\n\t\n\tif(uri) {\n\t\tmodule     = module || new ClassDependency(uri, context);\n\t\tisFunction = validatorIsTypeOf(definition, STRING_FUNCTION);\n\n\t\tif(dependencies) {\n\t\t\tdemand\n\t\t\t\t.apply(module.path, dependencies)\n\t\t\t\t.then(\n\t\t\t\t\tfunction() { module.deferred.resolve(isFunction ? definition.apply(NULL, arguments) : definition); },\n\t\t\t\t\tfunction() { module.deferred.reject(functionLog(new ClassFailure(ERROR_PROVIDE, module.id, arguments))); }\n\t\t\t\t);\n\t\t} else {\n\t\t\tmodule.deferred.resolve(isFunction ? definition() : definition);\n\t\t}\n\t} else {\n\t\tfunctionLog(new ClassFailure(ERROR_PROVIDE_ANONYMOUS));\n\t}\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tEVENT_PRE_REQUEST, EVENT_POST_REQUEST, TRUE\n\tlinkElement,\n\tregexMatchSourcemap, regexIsAbsoluteUri,\n\tfunctionResolveUrl\n*/\n\n//=require constants.js\n//=require shortcuts.js\n//=require variables.js\n//=require function/resolveUrl.js\n\nvar handlerModule = (function() {\n\tvar target         = document.getElementsByTagName('head')[0],\n\t\tregexMatchType = /^(application|text)\\/(x-)?javascript/;\n\n\treturn {\n\t\tvalidate: function(type) {\n\t\t\treturn regexMatchType.test(type);\n\t\t},\n\t\tonPreRequest: function() {\n\t\t\tvar url = this.url;\n\n\t\t\tthis.url = url.slice(-3) !== '.js' ? url + '.js' : url;\n\t\t},\n\t\tonPostRequest: function() {\n\t\t\tvar self = this,\n\t\t\t\tmatch, replacement;\n\n\t\t\twhile(match = regexMatchSourcemap.exec(self.source)) {\n\t\t\t\tif(regexIsAbsoluteUri.test(match[1])) {\n\t\t\t\t\tlinkElement.href = self.url;\n\n\t\t\t\t\treplacement = linkElement.protocol + '//' + linkElement.host + match[1];\n\t\t\t\t} else {\n\t\t\t\t\treplacement = functionResolveUrl(self.url + '/../' + match[1]);\n\t\t\t\t}\n\n\t\t\t\tself.source = self.source.replace(match[0], '//# sourceMappingURL=' + replacement + '.map');\n\t\t\t}\n\t\t},\n\t\tprocess: function() {\n\t\t\tvar self = this,\n\t\t\t\tscript;\n\n\t\t\tif(self.source) {\n\t\t\t\tscript       = document.createElement('script');\n\t\t\t\tscript.async = TRUE;\n\t\t\t\tscript.text  = self.source;\n\n\t\t\t\tscript.setAttribute('demand-id', self.id);\n\n\t\t\t\ttarget.appendChild(script);\n\t\t\t}\n\t\t}\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tMODULE_PREFIX_HANDLER, EVENT_POST_CONFIGURE, ERROR_RESOLVE, MOCK_PREFIX, STRING_STRING, FALSE, TRUE,\n\tregexMatchParameter, regexMatchSourcemap,\n\tvalidatorIsTypeOf, validatorIsObject,\n\tfunctionIterate, functionResolveId,\n\tClassDependency, ClassPledge, ClassFailure,\n\thandlerModule\n*/\n\n//=require constants.js\n//=require variables.js\n//=require validator/isTypeOf.js\n//=require validator/isObject.js\n//=require function/iterate.js\n//=require function/resolveId.js\n//=require class/dependency.js\n//=require class/pledge.js\n//=require class/Failure.js\n//=require handler/module.js\n\nvar handlerBundle = (function() {\n\tvar path     = MODULE_PREFIX_HANDLER + 'bundle',\n\t\tsettings = {};\n\n\tdemand\n\t\t.on(EVENT_POST_CONFIGURE + ':' + path, function(options) {\n\t\t\tvar i, dependency;\n\n\t\t\tif(validatorIsObject(options)) {\n\t\t\t\tsettings = options;\n\n\t\t\t\tfunctionIterate(settings, function(uri, dependencies) {\n\t\t\t\t\tfor(i = 0; (dependency = dependencies[i]); i++) {\n\t\t\t\t\t\tif(validatorIsTypeOf(dependency, STRING_STRING)) {\n\t\t\t\t\t\t\tdependencies[i] = functionResolveId(dependency);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\tfunction getType(dependencies) {\n\t\tvar type, i = 0, temp;\n\n\t\tfor(; (temp = dependencies[i]); i++) {\n\t\t\ttemp = temp.match(regexMatchParameter);\n\t\t\ttemp = (temp && temp[3]) || settings.handler;\n\n\t\t\tif(type) {\n\t\t\t\tif(temp !== type) {\n\t\t\t\t\treturn FALSE;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttype = temp;\n\t\t\t}\n\t\t}\n\n\t\treturn type;\n\t}\n\n\treturn {\n\t\tenqueue:  FALSE,\n\t\tvalidate: handlerModule.validate,\n\t\tonPreProcess: function() {\n\t\t\tvar self         = this,\n\t\t\t\tsource       = self.source,\n\t\t\t\tdeferred     = self.deferred,\n\t\t\t\tdependencies = settings[self.path],\n\t\t\t\ttype, match, pledges, dependency, i;\n\n\t\t\tfunction reject() {\n\t\t\t\tdeferred.reject(new ClassFailure(ERROR_RESOLVE, self.id, arguments));\n\t\t\t}\n\n\t\t\tif(dependencies && (type = getType(dependencies))) {\n\t\t\t\twhile(match = regexMatchSourcemap.exec(source)) {\n\t\t\t\t\tsource = source.replace(match[0], '');\n\t\t\t\t}\n\n\t\t\t\tself.source = source;\n\t\t\t\tpledges     = [];\n\n\t\t\t\tfor(i = 0; (dependency = dependencies[i]); i++) {\n\t\t\t\t\tpledges.push(ClassDependency.resolve(MOCK_PREFIX + dependency).pledge);\n\t\t\t\t}\n\n\t\t\t\tClassPledge.all(pledges).then(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tpledges.length = 0;\n\n\t\t\t\t\t\tfor(i = 0; (dependency = dependencies[i]); i++) {\n\t\t\t\t\t\t\tdependency         = dependencies[i] = ClassDependency.get(dependency) || new ClassDependency(dependency);\n\t\t\t\t\t\t\tdependency.handler = arguments[i];\n\n\t\t\t\t\t\t\tpledges.push(dependency.pledge);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(type === 'module') {\n\t\t\t\t\t\t\tqueue.enqueue.apply(queue, dependencies);\n\t\t\t\t\t\t\thandlerModule.process.call(self);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandlerModule.process.call(self);\n\t\t\t\t\t\t\tqueue.enqueue.apply(queue, dependencies);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tClassPledge.all(pledges).then(deferred.resolve, reject);\n\t\t\t\t\t},\n\t\t\t\t\treject\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t}\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings, setTimeout, clearTimeout, storage,\n\tMODULE_PREFIX_PLUGIN, MODULE_PREFIX_HANDLER, EVENT_POST_CONFIGURE, EVENT_PRE_RESOLVE, STRING_STRING, ERROR_RESOLVE, FALSE, TRUE,\n\tregexMatchInternal,\n\tvalidatorIsObject, validatorIsTypeOf,\n\tfunctionIterate, functionHash,\n\tClassDependency, ClassFailure,\n\tsingletonCache\n*/\n\n//=require constants.js\n//=require variables.js\n//=require validator/isTypeOf.js\n//=require validator/isObject.js\n//=require function/iterate.js\n//=require function/hash.js\n//=require class/dependency.js\n//=require class/failure.js\n//=require singleton/cache.js\n\nvar pluginGenie = (function() {\n\tvar path    = MODULE_PREFIX_PLUGIN + 'genie',\n\t\tpattern = [];\n\n\tfunction matchPattern(path) {\n\t\tvar i = 0, pointer, match;\n\n\t\tfor(; (pointer = pattern[i]); i++) {\n\t\t\tif(path.indexOf(pointer.prefix) === 0 && (!match || pointer.weight > match.weight)) {\n\t\t\t\tmatch = pointer;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfunction generateConfiguration(bundle) {\n\t\tvar matches       = bundle.matches,\n\t\t\tconfiguration = { pattern: {}, modules: { '/demand/handler/bundle': {} } },\n\t\t\ti = 0, pointer, dependency;\n\n\t\tconfiguration.pattern[bundle.id] = bundle.fn(matches);\n\t\tconfiguration.modules[MODULE_PREFIX_HANDLER + 'bundle'][bundle.id] = pointer = [];\n\n\t\tfor(; (dependency = matches[i]); i++) {\n\t\t\tpointer.push(dependency.path);\n\t\t}\n\n\t\treturn configuration;\n\t}\n\n\tfunction resolveDependencies() {\n\t\tvar i = 0, dependency;\n\n\t\tfor(; (dependency = this[i]); i++) {\n\t\t\tdependency.deferred.resolve(arguments[i]);\n\t\t}\n\t}\n\n\tfunction rejectDependencies() {\n\t\tvar i = 0, dependency;\n\n\t\tfor(; (dependency = this[i]); i++) {\n\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_RESOLVE, dependency.id));\n\t\t}\n\t}\n\n\tdemand\n\t\t.on(EVENT_POST_CONFIGURE + ':' + path, function(options) {\n\t\t\tif(validatorIsObject(options)) {\n\t\t\t\tpattern.length = 0;\n\n\t\t\t\tfunctionIterate(options, function(property, value) {\n\t\t\t\t\tpattern.push({ prefix: property, weight: property.length, fn: value });\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.on(EVENT_PRE_RESOLVE, function(dependencies, context) {\n\t\t\tvar bundles = {},\n\t\t\t\ti, dependency, pattern, matches;\n\n\t\t\tfor(i = 0; (dependency = dependencies[i]); i++) {\n\t\t\t\tif(validatorIsTypeOf(dependency, STRING_STRING) && !regexMatchInternal.test(dependency) && !ClassDependency.get(dependency, context)) {\n\t\t\t\t\tdependency = new ClassDependency(dependency, context, FALSE);\n\n\t\t\t\t\tif(dependency.type === 'module' && !singletonCache.get(dependency) && (pattern = matchPattern(dependency.path))) {\n\t\t\t\t\t\tdependency.index = i;\n\n\t\t\t\t\t\t(bundles[pattern.prefix] || (bundles[pattern.prefix] = { fn: pattern.fn, matches: [] })).matches.push(dependency);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunctionIterate(bundles, function(property, value) {\n\t\t\t\tmatches = value.matches;\n\n\t\t\t\tif(matches.length > 1) {\n\t\t\t\t\tvalue.id = path + '/' + functionHash(JSON.stringify(value.matches));\n\n\t\t\t\t\tfor(i = 0; (dependency = matches[i]); i++) {\n\t\t\t\t\t\t!ClassDependency.get(dependency.uri) && new ClassDependency(dependency.uri);\n\t\t\t\t\t}\n\n\t\t\t\t\tdemand.configure(generateConfiguration(value));\n\t\t\t\t\tdemand('bundle!' + value.id)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tresolveDependencies.bind(matches),\n\t\t\t\t\t\t\trejectDependencies.bind(matches)\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\treturn TRUE;\n}());"]}