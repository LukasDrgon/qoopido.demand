{"version":3,"sources":["demand.js","include/validator/isTypeOf.js","include/validator/isPositive.js","include/validator/isArray.js","include/validator/isObject.js","include/validator/isInstanceOf.js","include/function/getTimestamp.js","include/function/ResolveId.js","include/function/iterate.js","include/function/log.js","include/class/descriptor.js","include/class/failure.js","include/class/loader.js","include/constants.js","include/shortcuts.js","include/function/escapeRegex.js","include/function/ResolveUrl.js","include/function/ResolvePath.js","include/function/defer.js","include/function/merge.js","include/variables.js","include/singleton/uuid.js","include/class/pattern.js","include/class/pledge.js","include/class/queue.js","include/class/registry.js","include/class/xhr.js","include/singleton/event.js","include/demand.js","include/provide.js","include/singleton/cache.js","include/class/processor.js","include/class/dependency.js","include/handler/module.js"],"names":["global","document","options","validatorIsTypeOf","object","type","validatorIsPositive","value","STRING_NUMBER","isFinite","Math","floor","validatorIsArray","objectPrototypeToString","call","validatorIsObject","STRING_OBJECT","validatorIsInstanceOf","module","functionGetTimestamp","Date","functionResolveId","uri","context","parameter","match","regexMatchParameter","settings","handler","functionResolvePath","functionIterate","callback","property","properties","Object","keys","i","UNDEFINED","FALSE","functionLog","error","console","STRING_UNDEFINED","toString","ClassDescriptor","writable","configurable","enumerable","__proto__","NULL","ClassFailure","message","stack","this","arrayPrototypeSlice","ClassLoader","dependency","pattern","regexIsAbsoluteUri","test","path","matches","weight","url","functionResolveUrl","process","singletonEvent","emit","EVENT_PRE_REQUEST","ClassXhr","then","response","validate","source","EVENT_POST_REQUEST","deferred","reject","ERROR_LOAD","status","assignModule","id","factory","provide","queue","processor","cache","timeout","modules","DEMAND_ID","PROVIDE_ID","PATH_ID","MODULE_PREFIX","MODULE_PREFIX_HANDLER","MODULE_PREFIX_FUNCTION","MODULE_PREFIX_VALIDATOR","undefined","TRUE","STRING_STRING","STRING_BOOLEAN","STRING_FUNCTION","FUNCTION_EMPTY","EVENT_PREFIX","EVENT_POSTFIX","EVENT_CONFIGURE","EVENT_PRE_CONFIGURE","EVENT_POST_CONFIGURE","EVENT_CACHE","EVENT_CACHE_MISS","EVENT_CACHE_HIT","EVENT_CACHE_CLEAR","EVENT_CACHE_EXCEED","EVENT_REQUEST","EVENT_PROCESS","EVENT_PRE_PROCESS","EVENT_POST_PROCESS","EVENT_QUEUE","EVENT_QUEUE_ENQUEUE","EVENT_QUEUE_DEQUEUE","ERROR_PROVIDE","ERROR_PROVIDE_ANONYMOUS","arrayPrototype","Array","prototype","slice","arrayPrototypeConcat","concat","objectPrototype","setTimeout","create","defineProperty","getOwnPropertyNames","getOwnPropertyDescriptor","Function","clearTimeout","functionEscapeRegex","regexMatchRegex","replace","resolver","createElement","href","regexIsAbsolutePath","regexMatchBaseUrl","functionDefer","element","fallback","hasSetImmediate","fn","MutationObserver","observe","attributes","setAttribute","onMessage","event","data","storage","addEventListener","uuid","singletonUuid","generate","postMessage","onreadystatechange","parentNode","removeChild","body","appendChild","setImmediate","functionMerge","mergeProperties","targetPropertyIsObject","targetProperty","length","target","arguments","regexMatchSourcemap","RegExp","regexMatchInternal","randomize","character","r","random","Uuid","objectDefineProperty","regex","result","set","self","traverse","depth","item","indention","join","ClassPattern","regexMatchTrailingSlash","matchPattern","matchUrl","remove","ClassPledge","resolve","handle","PLEDGE_RESOLVED","PLEDGE_REJECTED","state","pointer","listener","PLEDGE_PENDING","shift","apply","pledge","index","resolved","count","check","rejected","push","total","executor","bind","catch","always","alwaysListener","resolveListener","rejectListener","defer","isPending","isResolved","isRejected","all","pledges","race","ClassQueue","enqueue","dequeue","current","ClassRegistry","get","key","XMLHttpRequest","checkState","readyState","abort","XDomainRequest","boundCheckState","xhr","ontimeout","onerror","onabort","onprogress","onload","responseText","getResponseHeader","open","send","Event","regexMatchEvent","filter","on","events","split","demand","dependencies","ClassDependency","configure","temp","version","lifetime","base","min","max","isFunction","definition","singletonCache","JSON","cachingEnabled","indexOf","Cache","STORAGE_PREFIX","STORAGE_SUFFIX_STATE","STORAGE_SUFFIX_VALUE","regexMatchState","supportsLocalStorage","localStorage","exception","supportsRemainingSpace","clear","removeItem","expired","parse","getItem","expires","spaceBefore","remainingSpace","setItem","stringify","Error","ClassProcessor","mock","registry","list","pending","scopedDemand","handlerModule","getElementsByTagName","regexMatchType","replacement","exec","protocol","host","script","async","text","/demand","location","main"],"mappings":"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","file":"demand.js","sourcesContent":["/**\n * Qoopido demand\n *\n * Promise like module loader (XHR) with localStorage caching\n *\n * Copyright (c) 2016 Dirk Lueth\n *\n * Dual licensed under the MIT and GPL licenses.\n *  - http://www.opensource.org/licenses/mit-license.php\n *  - http://www.gnu.org/copyleft/gpl.html\n *\n * @author Dirk Lueth <info@qoopido.com>\n *\n * @todo add garbage collection to storage (based on \"last access\")\n * @todo check genie for what happens if a single module is in cache, but not yet requested\n */\n\n/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tMODULE_PREFIX, MODULE_PREFIX_HANDLER, MODULE_PREFIX_VALIDATOR, MODULE_PREFIX_FUNCTION, TRUE,\n\tfunctionResolveUrl, validatorIsTypeOf, validatorIsArray, validatorIsObject, validatorIsInstanceOf, functionMerge, functionIterate, functionDefer\n \tClassQueue, ClassProcessor, ClassPledge, ClassXhr, ClassFailure,\n\tsingletonUuid,\n\thandlerModule\n*/\n\n(function(global, document, options) {\n\t'use strict';\n\n\t/* eslint-disable no-unused-vars */\n\tvar settings = { cache: {}, timeout: 8000, pattern: {}, modules: {}, handler: 'module' },\n\t\tqueue, processor;\n\t/* eslint-enable no-unused-vars */\n\n\t//=require constants.js\n\t//=require shortcuts.js\n\n\t//=require validator/isTypeOf.js\n\t//=require validator/isPositive.js\n\t//=require validator/isArray.js\n\t//=require validator/isObject.js\n\t//=require validator/isInstanceOf.js // not used internally\n\t//=require function/escapeRegex.js\n\t//=require function/getTimestamp.js\n\t//=require function/ResolveUrl.js\n\t//=require function/ResolvePath.js\n\t//=require function/ResolveId.js\n\t//=require function/defer.js\n\t//=require function/iterate.js\n\t//=require function/log.js\n\t//=require function/merge.js\n\n\t//=require variables.js\n\n\t//=require singleton/uuid.js\n\n\t//=require class/descriptor.js\n\t//=require class/failure.js\n\t//=require class/loader.js\n\t//=require class/pattern.js\n\t//=require class/pledge.js\n\t//=require class/queue.js\n\t//=require class/registry.js\n\t//=require class/xhr.js\n\t//=require singleton/event.js\n\n\t//###require inheritance.js\n\t//=require demand.js\n\t//=require provide.js\n\n\t//=require singleton/cache.js\n\t//=require class/processor.js\n\t//=require class/dependency.js\n\t//=require handler/module.js\n\n\tqueue     = new ClassQueue();\n\tprocessor = new ClassProcessor(queue);\n\n\tfunction assignModule(id, factory) {\n\t\tprovide(id, function() { return factory; });\n\t}\n\n\tassignModule(MODULE_PREFIX_HANDLER + 'module', handlerModule);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isTypeOf', validatorIsTypeOf);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isArray', validatorIsArray);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isObject', validatorIsObject);\n\tassignModule(MODULE_PREFIX_VALIDATOR + 'isInstanceOf', validatorIsInstanceOf);\n\t//assignModule(MODULE_PREFIX_VALIDATOR + 'isPositive', validatorIsPositiveInteger);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'merge', functionMerge);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'iterate', functionIterate);\n\t//assignModule(MODULE_PREFIX_FUNCTION + 'hash', functionHash);\n\tassignModule(MODULE_PREFIX_FUNCTION + 'defer', functionDefer);\n\tassignModule(MODULE_PREFIX + 'uuid', singletonUuid);\n\tassignModule(MODULE_PREFIX + 'pledge', ClassPledge);\n\tassignModule(MODULE_PREFIX + 'queue', ClassQueue);\n\tassignModule(MODULE_PREFIX + 'xhr', ClassXhr);\n\tassignModule(MODULE_PREFIX + 'failure', ClassFailure);\n\n\tdemand.configure({ cache: TRUE, base: '/', pattern: { '/demand': functionResolveUrl(((options && options.url) || location.href) + '/../').slice(0, -1)} });\n\toptions && options.settings && demand.configure(options.settings);\n\n\tfunctionDefer(function() {\n\t\toptions && options.main && demand(options.main);\n\t});\n}(this, document, 'demand' in this && demand));","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\n/**\n * isTypeOf\n *\n * Check whether a given object is of specified type\n *\n * @param object\n * @param {string} type\n *\n * @return {boolean}\n */\n\nfunction validatorIsTypeOf(object, type) {\n\treturn typeof object === type;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_NUMBER,\n\tvalidatorIsTypeOf\n*/\n\n/**\n * isPositive\n *\n * Check whether a given value is a positive integer\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsPositive(value) {\n\treturn validatorIsTypeOf(value, STRING_NUMBER) && isFinite(value) && Math.floor(value) === value && value >= 0;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tobjectPrototypeToString\n*/\n\n/**\n * isArray\n *\n * Check whether a given value is of type array\n *\n * @param value\n *\n * @return {boolean}\n */\n\nfunction validatorIsArray(value) {\n\treturn objectPrototypeToString.call(value) === '[object Array]';\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_OBJECT,\n\tvalidatorIsTypeOf\n*/\n\n/**\n * isObject\n *\n * Check whether a given object is of type object\n *\n * @param object\n *\n * @return {boolean}\n */\n\nfunction validatorIsObject(object) {\n\treturn object && validatorIsTypeOf(object, STRING_OBJECT);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\n/**\n * isInstanceOf\n *\n * Check whether a given object is an instance of specified type\n *\n * @param object\n * @param module\n *\n * @return {boolean}\n */\nfunction validatorIsInstanceOf(object, module) {\n\treturn object instanceof module;\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\nfunction functionGetTimestamp() {\n\treturn +new Date();\n}\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tregexMatchParameter,\n\tfunctionResolvePath\n*/\n\nfunction functionResolveId(uri, context) {\n\tvar parameter = uri.match(regexMatchParameter)\n\n\treturn ((parameter && parameter[3]) || settings.handler) + '!' + functionResolvePath(uri, context);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tUNDEFINED, FALSE\n*/\n\n/**\n * iterate\n *\n * Iterate over enumerable & own properties of a given\n * object and pass current property as well as its value\n * to a callback function\n *\n * @param {object} object\n * @param {function} callback\n * @param context\n *\n * @return {object}\n */\n\nfunction functionIterate(object, callback, context) {\n\tvar properties = Object.keys(object),\n\t\ti = 0, property;\n\n\tfor(; (property = properties[i]) !== UNDEFINED; i++) {\n\t\tif(callback.call(context, property, object[property]) === FALSE) {\n\t\t\tbreak;\n\t\t}\n\t}\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_UNDEFINED,\n\tvalidatorIsTypeOf\n*/\n\nfunction functionLog(error) {\n\t/* eslint-disable no-console */\n\tif(!validatorIsTypeOf(console, STRING_UNDEFINED)) {\n\t\tconsole.error(error.toString());\n\t}\n\t/* eslint-enable no-console */\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tNULL\n*/\n\nfunction ClassDescriptor(value, writable, configurable, enumerable) {\n\treturn {\n\t\t__proto__:    NULL,\n\t\tvalue:        value,\n\t\tenumerable:   !!enumerable,\n\t\tconfigurable: !!configurable,\n\t\twritable:     !!writable\n\t};\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tDEMAND_ID,\n\tarrayPrototypeSlice\n*/\n\nfunction ClassFailure(message, module, stack) {\n\tthis.message = message;\n\t\t\n\tmodule && (this.module = module);\n\tstack && (this.stack = arrayPrototypeSlice.call(stack));\n}\n\t\nClassFailure.prototype = {\n\t/* only for reference\n\t message: NULL,\n\t module:  NULL,\n\t stack:   NULL,\n\t */\n\ttoString: function() {\n\t\tvar self   = this,\n\t\t\tresult = DEMAND_ID + ': ' + self.message + ' ' + (self.module ? '\"' + self.module + '\"' : '');\n\n\t\tif(self.stack) {\n\t\t\tresult = ClassFailure.traverse(self.stack, result, 1);\n\t\t}\n\t\t\t\n\t\treturn result;\n\t}\n};\n\t\nClassFailure.traverse = function(stack, value, depth) {\n\tvar indention = new Array(depth + 1).join(' '),\n\t\ti = 0, item;\n\t\t\n\tfor(; item = stack[i]; i++) {\n\t\tvalue += '\\n' + indention + '> ' + item.message + ' ' + (item.module ? '\"' + item.module + '\"' : '');\n\t\t\t\n\t\tif(item.stack) {\n\t\t\tvalue = ClassFailure.traverse(item.stack, value, depth + 1);\n\t\t}\n\t}\n\t\t\n\treturn value;\n};","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n \tEVENT_PRE_REQUEST, EVENT_POST_REQUEST, ERROR_LOAD,\n\tregexIsAbsoluteUri,\n\tfunctionIterate, functionResolveUrl,\n\tClassXhr, ClassFailure,\n\tsingletonEvent\n*/\n\nfunction ClassLoader(dependency) {\n\tvar pattern;\n\n\tif(!regexIsAbsoluteUri.test(dependency.path)) {\n\t\tfunctionIterate(settings.pattern, function(property, value) {\n\t\t\tvalue.matches(dependency.path) && (!pattern || pattern.weight < value.weight) && (pattern = value);\n\t\t});\n\t}\n\n\tdependency.url = pattern ? functionResolveUrl(pattern.process(dependency.path)) : dependency.path;\n\n\tsingletonEvent.emit(EVENT_PRE_REQUEST, dependency.type, dependency);\n\n\tnew ClassXhr(dependency.url).then(\n\t\tfunction(response, type) {\n\t\t\tif(dependency.handler.validate(type)) {\n\t\t\t\tdependency.source = response;\n\n\t\t\t\tsingletonEvent.emit(EVENT_POST_REQUEST, dependency.type, dependency);\n\t\t\t} else {\n\t\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (content-type)', dependency.path));\n\t\t\t}\n\t\t},\n\t\tfunction(status) {\n\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + (status ? ' (status)' : ''), dependency.path));\n\t\t}\n\t);\n}","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\nvar DEMAND_ID               = 'demand',\n\tPROVIDE_ID              = 'provide',\n\tPATH_ID                 = 'path',\n\tMODULE_PREFIX           = '/' + DEMAND_ID + '/',\n\tMODULE_PREFIX_HANDLER   = MODULE_PREFIX + 'handler/',\n\tMODULE_PREFIX_FUNCTION  = MODULE_PREFIX + 'function/',\n\tMODULE_PREFIX_VALIDATOR = MODULE_PREFIX + 'validator/',\n\tNULL                    = null,\n\tUNDEFINED               = undefined,\n\tFALSE                   = false,\n\tTRUE                    = true,\n\tSTRING_UNDEFINED        = 'undefined',\n\tSTRING_STRING           = 'string',\n\tSTRING_BOOLEAN          = 'boolean',\n\tSTRING_OBJECT           = 'object',\n\tSTRING_FUNCTION         = 'function',\n\tSTRING_NUMBER           = 'number',\n\tFUNCTION_EMPTY          = function() {},\n\tEVENT_PREFIX            = 'pre',\n\tEVENT_POSTFIX           = 'post',\n\tEVENT_CONFIGURE         = 'Configure',\n\tEVENT_PRE_CONFIGURE     = EVENT_PREFIX + EVENT_CONFIGURE,\n\tEVENT_POST_CONFIGURE    = EVENT_POSTFIX + EVENT_CONFIGURE,\n\tEVENT_CACHE             = 'cache',\n\tEVENT_CACHE_MISS        = EVENT_CACHE + 'Miss',\n\tEVENT_CACHE_HIT         = EVENT_CACHE + 'Hit',\n\tEVENT_CACHE_CLEAR       = EVENT_CACHE + 'Clear',\n\tEVENT_CACHE_EXCEED      = EVENT_CACHE + 'Exceed',\n\tEVENT_REQUEST           = 'Request',\n\tEVENT_PRE_REQUEST       = EVENT_PREFIX + EVENT_REQUEST,\n\tEVENT_POST_REQUEST      = EVENT_POSTFIX + EVENT_REQUEST,\n\tEVENT_PROCESS           = 'Process',\n\tEVENT_PRE_PROCESS       = EVENT_PREFIX + EVENT_PROCESS,\n\tEVENT_POST_PROCESS      = EVENT_POSTFIX + EVENT_PROCESS,\n\tEVENT_QUEUE             = 'queue',\n\tEVENT_QUEUE_ENQUEUE     = EVENT_QUEUE + 'Enqueue',\n\tEVENT_QUEUE_DEQUEUE     = EVENT_QUEUE + 'Dequeue',\n\tERROR_LOAD              = 'error loading',\n\tERROR_PROVIDE           = 'error providing',\n\tERROR_PROVIDE_ANONYMOUS = 'unspecified anonymous provide';","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\nvar arrayPrototype                 = Array.prototype,\n\tarrayPrototypeSlice            = arrayPrototype.slice,\n\tarrayPrototypeConcat           = arrayPrototype.concat,\n\tobjectPrototype                = Object.prototype,\n\tobjectPrototypeToString        = objectPrototype.toString,\n\tobjectCreate                   = Object.create,\n\tobjectDefineProperty           = Object.defineProperty,\n\tobjectGetOwnPropertyNames      = Object.getOwnPropertyNames,\n\tobjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,\n\tfunctionPrototype              = Function.prototype,\n\tsetTimeout                     = global.setTimeout,\n\tclearTimeout                   = global.clearTimeout;","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\nvar functionEscapeRegex = (function() {\n\tvar regexMatchRegex = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n\n\treturn function functionEscapeRegex(value) {\n\t\treturn value.replace(regexMatchRegex, '\\\\$&');\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings\n*/\n\nvar functionResolveUrl = (function() {\n\tvar resolver = document.createElement('a');\n\n\treturn function functionResolveUrl(url) {\n\t\tresolver.href = url;\n\n\t\treturn resolver.href;\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tregexMatchParameter, regexMatchBaseUrl, regexIsAbsoluteUri\n\tfunctionResolveUrl\n*/\n\nvar functionResolvePath = (function() {\n\tvar regexIsAbsolutePath = /^\\//;\n\n\treturn function functionResolvePath(uri, context) {\n\t\tvar path = uri.replace(regexMatchParameter, '');\n\n\t\tif(!regexIsAbsolutePath.test(path) && !regexIsAbsoluteUri.test(path)) {\n\t\t\tpath = '/' + functionResolveUrl(((context && functionResolveUrl(context + '/../')) || '/') + path).replace(regexMatchBaseUrl, '');\n\t\t}\n\n\t\treturn path;\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tNULL, TRUE, FALSE,\n\tsetTimeout,\n\tsingletonUuid\n*/\n\n/**\n * defer\n *\n * delay function execution like setImmediate does\n *\n * @param {function} function\n */\nvar functionDefer = (function() {\n\tvar hasSetImmediate = 'setImmediate' in global,\n\t\telement, fallback;\n\n\tif('MutationObserver' in global) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement = document.createElement('div');\n\n\t\t\tnew MutationObserver(function() { fn(); })\n\t\t\t\t.observe(element, { attributes: TRUE });\n\n\t\t\telement.setAttribute('i', '1');\n\t\t};\n\t}\n\n\tif(!hasSetImmediate && 'postMessage' in global && !('importScripts' in global) && 'addEventListener' in global) {\n\t\treturn (function() {\n\t\t\tvar storage = {};\n\n\t\t\tfunction onMessage(event) {\n\t\t\t\tif(event.source === global && event.data && storage[event.data]) {\n\t\t\t\t\tstorage[event.data]();\n\n\t\t\t\t\tdelete storage[event.data];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tglobal.addEventListener('message', onMessage, FALSE);\n\n\t\t\treturn function functionDefer(fn) {\n\t\t\t\tvar uuid = singletonUuid.generate();\n\n\t\t\t\tstorage[uuid] = fn;\n\n\t\t\t\tglobal.postMessage(uuid, '*');\n\t\t\t};\n\t\t}());\n\t}\n\n\tif(!hasSetImmediate && 'onreadystatechange' in (element = document.createElement('script'))) {\n\t\treturn function functionDefer(fn) {\n\t\t\telement.onreadystatechange = function onreadystatechange() {\n\t\t\t\telement.onreadystatechange = NULL;\n\t\t\t\telement.parentNode.removeChild(element);\n\n\t\t\t\tfn();\n\t\t\t};\n\n\t\t\tdocument.body.appendChild(element);\n\t\t};\n\t}\n\n\t/* eslint-disable no-undef */\n\tfallback = hasSetImmediate ? setImmediate : setTimeout;\n\t/* eslint-enable no-undef */\n\n\treturn function functionDefer(fn) {\n\t\tfallback(fn);\n\t};\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tUNDEFINED,\n\tvalidatorIsObject, functionIterate\n*/\n\n/**\n * merge\n *\n * Merge two or more objects into the first one passed in\n *\n * @param {...object} object\n *\n * @return {object}\n */\nvar functionMerge = (function() {\n\tfunction mergeProperties(property, value) {\n\t\tvar targetProperty = this[property],\n\t\t\ttargetPropertyIsObject;\n\n\t\tif(value !== UNDEFINED) {\n\t\t\tif(validatorIsObject(value)) {\n\t\t\t\ttargetPropertyIsObject = validatorIsObject(targetProperty);\n\n\t\t\t\tif(value.length !== UNDEFINED) {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length !== UNDEFINED) ? targetProperty : [];\n\t\t\t\t} else {\n\t\t\t\t\ttargetProperty = (targetPropertyIsObject && targetProperty.length === UNDEFINED) ? targetProperty : {};\n\t\t\t\t}\n\n\t\t\t\tthis[property] = functionMerge(targetProperty, value);\n\t\t\t} else {\n\t\t\t\tthis[property] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn function functionMerge() {\n\t\tvar target = arguments[0],\n\t\t\ti = 1, properties;\n\n\t\tfor(; (properties = arguments[i]) !== UNDEFINED; i++) {\n\t\t\tfunctionIterate(properties, mergeProperties, target);\n\t\t}\n\n\t\treturn target;\n\t};\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings,\n\tDEMAND_ID, PROVIDE_ID, PATH_ID,\n\tfunctionEscapeRegex, functionResolveUrl\n*/\n\nvar regexIsAbsoluteUri  = /^(http(s?):)?\\/\\//i,\n\tregexMatchSourcemap = /\\/\\/#\\s+sourceMappingURL\\s*=\\s*(?!(?:http[s]?:)?\\/\\/)(.+?)\\.map/g,\n\tregexMatchBaseUrl   = new RegExp('^' + functionEscapeRegex(functionResolveUrl('/'))),\n\tregexMatchInternal  = new RegExp('^' + DEMAND_ID + '|' + PROVIDE_ID + '|' + PATH_ID + '$'),\n\tregexMatchParameter = /^(mock:)?([+-])?((?:[-\\w]+\\/?)+)?(?:@(\\d+\\.\\d+.\\d+))?(?:#(\\d+))?!/;","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_UNDEFINED,\n\tvalidatorIsTypeOf,\n\tClassDescriptor\n*/\n\nvar singletonUuid = (function() {\n\tvar objectDefineProperty = Object.defineProperty,\n\t\tregex                = new RegExp('[xy]', 'g'),\n\t\tstorage              = {};\n\n\tfunction randomize(character) {\n\t\tvar r = Math.random() * 16 | 0;\n\n\t\treturn ((character === 'x') ? r : (r & 0x3 | 0x8)).toString(16);\n\t}\n\n\tfunction Uuid() {}\n\n\tUuid.prototype = {\n\t\tgenerate: function() {\n\t\t\tvar result;\n\n\t\t\tdo {\n\t\t\t\tresult = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(regex, randomize);\n\t\t\t} while(storage[result]);\n\n\t\t\tstorage[result] = 1;\n\n\t\t\treturn result;\n\t\t},\n\t\tset: function(target) {\n\t\t\tif(validatorIsTypeOf(target.uuid, STRING_UNDEFINED)) {\n\t\t\t\tobjectDefineProperty(target, 'uuid', new ClassDescriptor(this.generate()));\n\t\t\t}\n\n\t\t\treturn target.uuid;\n\t\t}\n\t};\n\n\treturn new Uuid();\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tfunctionResolveUrl, functionEscapeRegex\n*/\n\nvar ClassPattern = (function() {\n\tvar regexMatchTrailingSlash = /(.+)\\/$/;\n\n\tfunction ClassPattern(pattern, url) {\n\t\tvar self = this;\n\n\t\tself.weight       = pattern.length;\n\t\tself.url          = functionResolveUrl(url).replace(regexMatchTrailingSlash, '$1');\n\t\tself.matchPattern = new RegExp('^' + functionEscapeRegex(pattern));\n\t\tself.matchUrl     = new RegExp('^' + functionEscapeRegex(url));\n\t}\n\n\tClassPattern.prototype = {\n\t\t/* only for reference\n\t\t weight:       0,\n\t\t url:          NULL,\n\t\t matchPattern: NULL,\n\t\t matchUrl:     NULL,\n\t\t */\n\t\tmatches: function(path) {\n\t\t\treturn this.matchPattern.test(path);\n\t\t},\n\t\tremove: function(url) {\n\t\t\treturn url.replace(this.matchUrl, '');\n\t\t},\n\t\tprocess: function(path) {\n\t\t\treturn path.replace(this.matchPattern, this.url);\n\t\t}\n\t};\n\n\treturn ClassPattern;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n \tFUNCTION_EMPTY, NULL,\n\tarrayPrototypeSlice, arrayPrototypeConcat,\n\tfunctionDefer,\n\tsingletonUuid\n*/\n\nvar ClassPledge = (function() {\n\tvar PLEDGE_PENDING  = 'pending',\n\t\tPLEDGE_RESOLVED = 'resolved',\n\t\tPLEDGE_REJECTED = 'rejected',\n\t\tstorage         = {};\n\n\tfunction resolve() {\n\t\tstorage[this.uuid].handle(PLEDGE_RESOLVED, arguments);\n\t}\n\n\tfunction reject() {\n\t\tstorage[this.uuid].handle(PLEDGE_REJECTED, arguments);\n\t}\n\n\tfunction handle(state, parameter) {\n\t\tvar self     = this,\n\t\t\tlistener = storage[self.uuid],\n\t\t\tpointer, result;\n\n\t\tif(self.state === PLEDGE_PENDING) {\n\t\t\tself.state = state;\n\t\t\tself.value = parameter;\n\t\t}\n\n\t\twhile(pointer = listener[self.state].shift()) {\n\t\t\tresult = pointer.handler.apply(NULL, self.value);\n\n\t\t\tif(result && typeof result.then === 'function') {\n\t\t\t\tresult.then(pointer.deferred.resolve, pointer.deferred.reject);\n\t\t\t} else {\n\t\t\t\tpointer.deferred[self.state === PLEDGE_RESOLVED ? 'resolve' : 'reject'].apply(NULL, self.value);\n\t\t\t}\n\t\t}\n\n\t\tlistener[PLEDGE_RESOLVED].length = 0;\n\t\tlistener[PLEDGE_REJECTED].length = 0;\n\t}\n\n\tfunction observe(pledge, index, properties) {\n\t\tpledge.then(\n\t\t\tfunction() {\n\t\t\t\tproperties.resolved[index] = arrayPrototypeSlice.call(arguments);\n\n\t\t\t\tproperties.count++;\n\n\t\t\t\tcheck(properties);\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tproperties.rejected.push(arrayPrototypeSlice.call(arguments));\n\n\t\t\t\tcheck(properties);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction check(properties) {\n\t\tif(properties.count === properties.total) {\n\t\t\tproperties.deferred.resolve.apply(NULL, arrayPrototypeConcat.apply([], properties.resolved));\n\t\t} else if(properties.rejected.length + properties.count === properties.total) {\n\t\t\tproperties.deferred.reject.apply(NULL, arrayPrototypeConcat.apply([], properties.rejected));\n\t\t}\n\t}\n\n\tfunction ClassPledge(executor) {\n\t\tvar self = this;\n\n\t\tstorage[singletonUuid.set(self)] = { handle: handle.bind(self), resolved: [], rejected: [] };\n\n\t\texecutor(resolve.bind(self), reject.bind(self));\n\t}\n\n\tClassPledge.prototype = {\n\t\t/* only for reference\n\t\t uuid:   NULL,\n\t\t value:  NULL,\n\t\t cache:  NULL, // will only be set by storage\n\t\t */\n\t\tstate:  PLEDGE_PENDING,\n\t\t'catch': function(listener) {\n\t\t\treturn this.then(FUNCTION_EMPTY, listener);\n\t\t},\n\t\talways: function(alwaysListener) {\n\t\t\treturn this.then(alwaysListener, alwaysListener);\n\t\t},\n\t\tthen: function(resolveListener, rejectListener) {\n\t\t\tvar self       = this,\n\t\t\t\tproperties = storage[self.uuid],\n\t\t\t\tdeferred   = ClassPledge.defer();\n\n\t\t\tresolveListener && properties[PLEDGE_RESOLVED].push({ handler: resolveListener, deferred: deferred });\n\t\t\trejectListener && properties[PLEDGE_REJECTED].push({ handler: rejectListener, deferred: deferred });\n\n\t\t\tif(self.state !== PLEDGE_PENDING) {\n\t\t\t\tfunctionDefer(properties.handle);\n\t\t\t}\n\n\t\t\treturn deferred.pledge;\n\t\t},\n\t\tisPending: function() {\n\t\t\treturn this.state === PLEDGE_PENDING;\n\t\t},\n\t\tisResolved: function() {\n\t\t\treturn this.state === PLEDGE_RESOLVED;\n\t\t},\n\t\tisRejected: function() {\n\t\t\treturn this.state === PLEDGE_REJECTED;\n\t\t}\n\t};\n\n\tClassPledge.defer = function() {\n\t\tvar self = {};\n\n\t\tself.pledge = new ClassPledge(function(resolveListener, rejectListener) {\n\t\t\tself.resolve = resolveListener;\n\t\t\tself.reject  = rejectListener;\n\t\t});\n\n\t\treturn self;\n\t};\n\n\tClassPledge.all = function(pledges) {\n\t\tvar deferred   = ClassPledge.defer(),\n\t\t\tproperties = (storage[singletonUuid.generate()] = { deferred: deferred, resolved: [], rejected: [], total: pledges.length, count: 0 }),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tobserve(pledge, i, properties)\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\tClassPledge.race = function(pledges) {\n\t\tvar deferred = ClassPledge.defer(),\n\t\t\ti = 0, pledge;\n\n\t\tfor(; pledge = pledges[i]; i++) {\n\t\t\tpledge.then(deferred.resolve, deferred.reject);\n\t\t}\n\n\t\treturn deferred.pledge;\n\t};\n\n\treturn ClassPledge;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tEVENT_QUEUE_ENQUEUE, EVENT_QUEUE_DEQUEUE,\n\tarrayPrototypeSlice,\n\tsingletonUuid, singletonEvent\n*/\n\nvar ClassQueue = (function() {\n\tvar storage = {};\n\t\n\tfunction ClassQueue() {\n\t\tstorage[singletonUuid.set(this)] = [];\n\t}\n\t\n\tClassQueue.prototype = {\n\t\t/* only for reference\n\t\t uuid: NULL,\n\t\t */\n\t\tenqueue: function() {\n\t\t\tstorage[this.uuid] = storage[this.uuid].concat(arrayPrototypeSlice.call(arguments));\n\n\t\t\tsingletonEvent.emit(EVENT_QUEUE_ENQUEUE, this.uuid);\n\t\t},\n\t\tdequeue: function() {\n\t\t\tsingletonEvent.emit(EVENT_QUEUE_DEQUEUE, this.uuid);\n\n\t\t\treturn storage[this.uuid].shift();\n\t\t},\n\t\tget current() {\n\t\t\treturn storage[this.uuid][0];\n\t\t},\n\t\tget length() {\n\t\t\treturn storage[this.uuid].length;\n\t\t}\n\t};\n\t\n\treturn ClassQueue;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tsingletonUuid\n*/\n\nvar ClassRegistry = (function() {\n\tvar storage = {};\n\n\tfunction ClassRegistry() {\n\t\tvar self = this;\n\n\t\tstorage[singletonUuid.set(self)] = {};\n\t}\n\n\tClassRegistry.prototype = {\n\t\tget: function(key) {\n\t\t\treturn key ? storage[this.uuid][key] : storage[this.uuid];\n\t\t},\n\t\tset: function(key, value) {\n\t\t\tstorage[this.uuid][key] = value;\n\t\t}\n\t};\n\n\treturn ClassRegistry;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tregexMatchBaseUrl,\n\tsetTimeout, clearTimeout,\n\tClassPledge\n*/\n\nvar ClassXhr = (function(XMLHttpRequest) {\n\tvar XDomainRequest = 'XDomainRequest' in global && global.XDomainRequest || XMLHttpRequest;\n\t\n\tfunction checkState() {\n\t\tif(this.readyState < 4) {\n\t\t\tthis.abort();\n\t\t}\n\t}\n\t\n\treturn function ClassXhr(url) {\n\t\tvar boundCheckState = checkState.bind(this),\n\t\t\tdeferred        = ClassPledge.defer(),\n\t\t\txhr             = regexMatchBaseUrl.test(url) ? new XMLHttpRequest() : new XDomainRequest(),\n\t\t\ttimeout         = settings.timeout,\n\t\t\tpointer;\n\t\t\n\t\txhr.ontimeout = xhr.onerror = xhr.onabort = function() {\n\t\t\tdeferred.reject(xhr.status);\n\t\t};\n\t\txhr.onprogress = xhr.onreadystatechange = function() {\n\t\t\tclearTimeout(pointer);\n\t\t\t\n\t\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t};\n\t\txhr.onload = function() {\n\t\t\ttimeout = clearTimeout(timeout);\n\t\t\t\n\t\t\tif(!('status' in xhr) || xhr.status === 200) {\n\t\t\t\tdeferred.resolve(xhr.responseText, xhr.getResponseHeader && xhr.getResponseHeader('content-type'));\n\t\t\t} else {\n\t\t\t\tdeferred.reject(xhr.status);\n\t\t\t}\n\t\t};\n\t\t\n\t\txhr.open('GET', url, true);\n\t\tsetTimeout(function() {\n\t\t\txhr.send();\n\t\t});\n\t\t\n\t\tpointer = setTimeout(boundCheckState, settings.timeout);\n\t\t\n\t\treturn deferred.pledge;\n\t};\n}(XMLHttpRequest));","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tNULL, STRING_STRING, STRING_FUNCTION,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf\n*/\n\nvar singletonEvent = (function() {\n\tvar regexMatchEvent = /^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Configure|Request|Process|Cache)$/,\n\t\tlistener        = {};\n\n\tfunction Event() {}\n\n\tEvent.prototype = {\n\t\temit: function (event, filter) {\n\t\t\tvar pointer = listener[event],\n\t\t\t\tparameter, i, item;\n\n\t\t\tif(pointer) {\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 2);\n\n\t\t\t\tfor(i = 0; (item = pointer[i]); i++) {\n\t\t\t\t\tif(!item.filter || item.filter === filter) {\n\t\t\t\t\t\titem.callback.apply(NULL, parameter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ton: function(events, callback) {\n\t\t\tvar event;\n\n\t\t\tif(validatorIsTypeOf(events, STRING_STRING) && validatorIsTypeOf(callback, STRING_FUNCTION)) {\n\t\t\t\tevents = events.split(' ');\n\n\t\t\t\twhile(event = events.shift()) {\n\t\t\t\t\tevent = event.split(':');\n\n\t\t\t\t\tif(regexMatchEvent.test(event[0])) {\n\t\t\t\t\t\t(listener[event[0]] || (listener[event[0]] = [])).push({ callback: callback, filter: event[1] });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn new Event();\n}());\n","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_BOOLEAN, STRING_STRING, EVENT_PRE_CONFIGURE, EVENT_POST_CONFIGURE, EVENT_CACHE_MISS, EVENT_CACHE_HIT, EVENT_POST_REQUEST, EVENT_PRE_PROCESS, NULL,\n\tarrayPrototypeSlice,\n\tvalidatorIsTypeOf, validatorIsObject, validatorIsPositive, functionIterate, functionMerge, functionDefer,\n\tClassPledge, ClassDependency, ClassPattern, ClassLoader, \n\tsingletonEvent\n*/\n\nvar demand = global.demand = (function() {\n\tfunction demand() {\n\t\tvar dependencies = arrayPrototypeSlice.call(arguments),\n\t\t\tcontext      = this !== global ? this : NULL,\n\t\t\ti = 0, uri;\n\n\t\tfor(; (uri = dependencies[i]); i++) {\n\t\t\tdependencies[i] = ClassDependency.resolve(uri, context).pledge;\n\t\t}\n\n\t\treturn ClassPledge.all(dependencies);\n\t}\n\n\tdemand.configure = function(options) {\n\t\tvar cache    = options.cache,\n\t\t\tversion  = options.version,\n\t\t\ttimeout  = options.timeout,\n\t\t\tlifetime = options.lifetime,\n\t\t\tbase     = options.base,\n\t\t\tpattern  = options.pattern,\n\t\t\tmodules  = options.modules,\n\t\t\tpointer  = settings.modules,\n\t\t\ttemp;\n\n\t\tif(validatorIsTypeOf(cache, STRING_BOOLEAN)) {\n\t\t\tsettings.cache[''] = { weight: 0, state: cache };\n\t\t} else if(validatorIsObject(cache)) {\n\t\t\tfunctionIterate(cache, function(property, value) {\n\t\t\t\tsettings.cache[property] = { weight: property.length, state: value };\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsTypeOf(version, STRING_STRING)) {\n\t\t\tsettings.version = version;\n\t\t}\n\n\t\tif(validatorIsPositive(timeout)) {\n\t\t\tsettings.timeout = Math.min(Math.max(timeout, 2), 12) * 1000;\n\t\t}\n\n\t\tif(validatorIsPositive(lifetime) && lifetime > 0) {\n\t\t\tsettings.lifetime = lifetime * 1000;\n\t\t}\n\n\t\tif(validatorIsTypeOf(base, STRING_STRING) && base !== '') {\n\t\t\tsettings.pattern.base = new ClassPattern('', base);\n\t\t}\n\n\t\tif(validatorIsObject(pattern)) {\n\t\t\tfunctionIterate(pattern, function(property, value) {\n\t\t\t\tproperty !== 'base' && (settings.pattern[property] = new ClassPattern(property, value));\n\t\t\t});\n\t\t}\n\n\t\tif(validatorIsObject(modules)) {\n\t\t\tfunctionIterate(modules, function(property, value) {\n\t\t\t\ttemp = pointer[property] = pointer[property] || {};\n\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_CONFIGURE, property, temp);\n\n\t\t\t\tfunctionMerge(temp, value);\n\n\t\t\t\tsingletonEvent.emit(EVENT_POST_CONFIGURE, property, temp);\n\t\t\t});\n\t\t}\n\n\t\treturn demand;\n\t};\n\n\tdemand.on = function(events, callback) {\n\t\tsingletonEvent.on(events, callback);\n\n\t\treturn demand;\n\t};\n\n\tdemand\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tnew ClassLoader(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_HIT + ' ' + EVENT_POST_REQUEST, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tsingletonEvent.emit(EVENT_PRE_PROCESS, NULL, dependency)\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_PRE_PROCESS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tqueue.enqueue(dependency);\n\t\t\t});\n\t\t});\n\n\treturn demand;\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings,\n\tSTRING_STRING, STRING_FUNCTION, ERROR_PROVIDE, ERROR_PROVIDE_ANONYMOUS, NULL,\n\tvalidatorIsTypeOf, validatorIsArray, functionLog,\n\tClassDependency, ClassFailure\n*/\n\nglobal.provide = function provide() {\n\tvar uri          = validatorIsTypeOf(arguments[0], STRING_STRING) ? arguments[0] : NULL,\n\t\tdependencies = validatorIsArray(arguments[uri ? 1 : 0]) ? arguments[uri ? 1 : 0] : NULL,\n\t\tdefinition   = dependencies ? arguments[uri ? 2 : 1] : arguments[uri ? 1 : 0],\n\t\tmodule, isFunction;\n\n\tif(!uri && processor.current) {\n\t\tmodule = processor.current;\n\t\turi    = processor.current.uri;\n\n\t\tprocessor.process();\n\t}\n\t\n\tif(uri) {\n\t\tmodule     = module || new ClassDependency(uri);\n\t\tisFunction = validatorIsTypeOf(definition, STRING_FUNCTION);\n\n\t\tif(dependencies) {\n\t\t\tdemand\n\t\t\t\t.apply(module.path, dependencies)\n\t\t\t\t.then(\n\t\t\t\t\tfunction() { module.deferred.resolve(isFunction ? definition.apply(NULL, arguments) : definition); },\n\t\t\t\t\tfunction() { functionLog(new ClassFailure(ERROR_PROVIDE, module.path)); }\n\t\t\t\t);\n\t\t} else {\n\t\t\tmodule.deferred.resolve(isFunction ? definition() : definition);\n\t\t}\n\t} else {\n\t\tthrow new ClassFailure(ERROR_PROVIDE_ANONYMOUS);\n\t}\n};","/* global \n\tglobal, document, demand, provide, queue, processor, settings\n\tDEMAND_ID, FUNCTION_EMPTY, EVENT_POST_PROCESS, EVENT_CACHE_HIT, EVENT_CACHE_MISS, EVENT_CACHE_EXCEED, EVENT_CACHE_CLEAR, NULL, FALSE, TRUE,\n\tfunctionGetTimestamp, functionEscapeRegex, functionIterate, functionDefer, functionResolveId\n\tsingletonEvent\n*/\n\nvar singletonCache = (function(JSON) {\n\tvar STORAGE_PREFIX         = '[' + DEMAND_ID + ']',\n\t\tSTORAGE_SUFFIX_STATE   = '[state]',\n\t\tSTORAGE_SUFFIX_VALUE   = '[value]',\n\t\tregexMatchState        = new RegExp('^' + functionEscapeRegex(STORAGE_PREFIX) + '\\\\[(.+?)\\\\]' + functionEscapeRegex(STORAGE_SUFFIX_STATE) + '$'),\n\t\tsupportsLocalStorage   = (function() { try { return 'localStorage' in global && global.localStorage; } catch(exception) { return FALSE; } }()),\n\t\tsupportsRemainingSpace = supportsLocalStorage && 'remainingSpace' in localStorage,\n\t\tcache;\n\n\tdemand\n\t\t.on(EVENT_POST_PROCESS, function(dependency) {\n\t\t\tfunctionDefer(function() {\n\t\t\t\tcache.set(dependency);\n\t\t\t});\n\t\t})\n\t\t.on(EVENT_CACHE_MISS, function(dependency) {\n\t\t\tdemand.clear.path(dependency.id);\n\t\t});\n\n\tdemand.clear = {\n\t\tpath: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function path(path) {\n\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\tvar id  = functionResolveId(path),\n\t\t\t\t\t\t\tkey = STORAGE_PREFIX + '[' + id + ']';\n\n\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_STATE);\n\t\t\t\t\t\tlocalStorage.removeItem(key + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\tsingletonEvent.emit(EVENT_CACHE_CLEAR, path);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}()),\n\t\tall: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function all() {\n\t\t\t\t\tvar match;\n\n\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\tmatch && this.path(match[1]);\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}()),\n\t\texpired: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function expired() {\n\t\t\t\t\tvar match, state;\n\n\t\t\t\t\tfunctionIterate(localStorage, function(property) {\n\t\t\t\t\t\tmatch = property.match(regexMatchState);\n\n\t\t\t\t\t\tif(match) {\n\t\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '[' + match[1] + ']' + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\t\tif(state && state.expires > 0 && state.expires <= functionGetTimestamp()) {\n\t\t\t\t\t\t\t\tthis.path(match[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}())\n\t};\n\n\tfunction cachingEnabled(dependency) {\n\t\tvar match;\n\n\t\tif(dependency.cache !== NULL) {\n\t\t\treturn dependency.cache;\n\t\t}\n\n\t\tfunctionIterate(settings.cache, function(property, value) {\n\t\t\tif(dependency.path.indexOf(property) === 0 && (!match || value.weight > match.weight)) {\n\t\t\t\tmatch = value;\n\t\t\t}\n\t\t});\n\n\t\treturn match ? match.state : FALSE;\n\n\t}\n\n\tfunction emit(event, dependency) {\n\t\tsingletonEvent.emit(event, dependency.path, dependency);\n\t}\n\n\tfunction Cache() {}\n\n\tCache.prototype = {\n\t\tget: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function get(dependency) {\n\t\t\t\t\tvar id, state;\n\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tid    = STORAGE_PREFIX + '[' + dependency.id + ']';\n\t\t\t\t\t\tstate = JSON.parse(localStorage.getItem(id + STORAGE_SUFFIX_STATE));\n\n\t\t\t\t\t\tif(state && state.version === dependency.version && ((!state.expires && !dependency.lifetime) || state.expires > functionGetTimestamp())) {\n\t\t\t\t\t\t\tdependency.source = localStorage.getItem(id + STORAGE_SUFFIX_VALUE);\n\n\t\t\t\t\t\t\temit(EVENT_CACHE_HIT, dependency);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn function get(dependency) {\n\t\t\t\t\temit(EVENT_CACHE_MISS, dependency);\n\t\t\t\t};\n\t\t\t}\n\t\t}()),\n\t\tset: (function() {\n\t\t\tif(supportsLocalStorage) {\n\t\t\t\treturn function set(dependency) {\n\t\t\t\t\tif(cachingEnabled(dependency)) {\n\t\t\t\t\t\tfunctionDefer(function() {\n\t\t\t\t\t\t\tvar id = STORAGE_PREFIX + '[' + dependency.id + ']',\n\t\t\t\t\t\t\t\tspaceBefore;\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tspaceBefore = supportsRemainingSpace ? localStorage.remainingSpace : NULL;\n\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_VALUE, dependency.source);\n\t\t\t\t\t\t\t\tlocalStorage.setItem(id + STORAGE_SUFFIX_STATE, JSON.stringify({ version: dependency.version, expires: dependency.lifetime ? functionGetTimestamp() + dependency.lifetime : dependency.lifetime }));\n\n\t\t\t\t\t\t\t\t// strict equality check with \"===\" is required due to spaceBefore might be \"0\"\n\t\t\t\t\t\t\t\tif(spaceBefore !== NULL && localStorage.remainingSpace === spaceBefore) {\n\t\t\t\t\t\t\t\t\tthrow new Error('QUOTA_EXCEEDED_ERR');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn TRUE;\n\t\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\t\tsingletonEvent.emit(EVENT_CACHE_EXCEED, dependency.path, dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn FUNCTION_EMPTY;\n\t\t\t}\n\t\t}())\n\t};\n\n\treturn (cache = new Cache());\n}(JSON));","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tEVENT_POST_PROCESS, EVENT_QUEUE_ENQUEUE, NULL,\n\tsingletonUuid, singletonEvent\n*/\n\nvar ClassProcessor = (function() {\n\tvar storage = {};\n\n\tfunction ClassProcessor(queue) {\n\t\tvar self    = this,\n\t\t\tpointer = storage[singletonUuid.set(self)] = { queue: queue, current: NULL };\n\n\t\tdemand\n\t\t\t.on(EVENT_QUEUE_ENQUEUE + ':' + queue.uuid, function() {\n\t\t\t\t!pointer.current && self.process();\n\t\t\t});\n\t}\n\n\tClassProcessor.prototype = {\n\t\t/* only for reference\n\t\t uuid: NULL,\n\t\t */\n\t\tprocess: function() {\n\t\t\tvar pointer = storage[singletonUuid.set(this)],\n\t\t\t\tcurrent;\n\n\t\t\tif(pointer.queue.length) {\n\t\t\t\tcurrent = pointer.current = pointer.queue.dequeue();\n\n\t\t\t\tcurrent.handler.process(current.path, current.source);\n\n\t\t\t\tsingletonEvent.emit(EVENT_POST_PROCESS, current.path, current);\n\t\t\t} else {\n\t\t\t\tpointer.current = NULL;\n\t\t\t}\n\t\t},\n\t\tget current() {\n\t\t\treturn storage[singletonUuid.set(this)].current;\n\t\t}\n\t};\n\t\n\treturn ClassProcessor;\n}());","/* global \n\tglobal, document, demand, provide, queue, processor, settings,\n\tMODULE_PREFIX_HANDLER, ERROR_LOAD, DEMAND_ID, PROVIDE_ID, PATH_ID, NULL, TRUE, FALSE,\n\tregexMatchInternal, regexMatchParameter\n\tvalidatorIsPositive, functionResolvePath, functionResolveId, functionResolveUrl, functionIterate,\n\tClassRegistry, ClassPledge, ClassFailure,\n\tsingletonCache\n*/\n\nvar ClassDependency = (function() {\n\tvar registry = new ClassRegistry();\n\n\tdemand.list = {\n\t\tall: function() {\n\t\t\treturn Object.keys(registry.get());\n\t\t},\n\t\tpending:  function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isPending()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\tresolved: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isResolved()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t},\n\t\trejected: function() {\n\t\t\tvar modules = [];\n\n\t\t\tfunctionIterate(registry.get(), function(property, value) {\n\t\t\t\tif(value.pledge.isRejected()) {\n\t\t\t\t\tmodules.push(property);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn modules;\n\t\t}\n\t};\n\n\tfunction ClassDependency(uri, context) {\n\t\tvar self      = this,\n\t\t\tparameter = uri.match(regexMatchParameter);\n\n\t\tself.deferred = ClassPledge.defer();\n\t\tself.pledge   = self.deferred.pledge;\n\t\tself.path     = functionResolvePath(uri, context);\n\t\tself.mock     = (parameter && parameter[1]) ? TRUE : FALSE;\n\t\tself.cache    = (parameter && parameter[2]) ? parameter[2] === '+' : NULL;\n\t\tself.type     = (parameter && parameter[3]) || settings.handler;\n\t\tself.version  = (parameter && parameter[4]) || settings.version;\n\t\tself.lifetime = (parameter && parameter[5] && parameter[5] * 1000) || settings.lifetime;\n\t\tself.id       = self.type + '!' + self.path;\n\t\tself.uri      = (self.mock ? 'mock:' : '') + self.type + '@' + self.version + (validatorIsPositive(self.lifetime) && self.lifetime > 0 ? '#' + self.lifetime : '' ) + '!' + self.path;\n\n\t\tregistry.set(self.id, self);\n\t\t\n\t\treturn self;\n\t}\n\n\t/* only for reference\n\t ClassDependency.prototype = {\n\t\tdeferred: NULL,\n\t\tpledge:   NULL,\n\t\tpath:     NULL,\n\t\tmock:     NULL,\n\t\tcache:    NULL,\n\t\ttype:     NULL,\n\t\tversion:  NULL,\n\t\tlifetime: NULL,\n\t\tid:       NULL,\n\t\turi:      NULL,\n\t\thandler:  NULL, // set by Dependency.resolve\n\t \turl:      NULL, // set by Loader\n\t\tsource:   NULL, // set by Cache or Loader\n\t};\n\t*/\n\n\tClassDependency.resolve = function(uri, context) {\n\t\tvar dependency = registry.get(functionResolveId(uri, context));\n\n\t\tif(!dependency) {\n\t\t\tdependency = new ClassDependency(uri, context);\n\n\t\t\tif(context && regexMatchInternal.test(uri)) {\n\t\t\t\tswitch(uri) {\n\t\t\t\t\tcase DEMAND_ID:\n\t\t\t\t\t\tdependency.deferred.resolve((function() {\n\t\t\t\t\t\t\tvar scopedDemand = demand.bind(context);\n\n\t\t\t\t\t\t\tfunctionIterate(demand, function(property, value) {\n\t\t\t\t\t\t\t\tscopedDemand[property] = value;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn scopedDemand;\n\t\t\t\t\t\t}()));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PROVIDE_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(provide.bind(context));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PATH_ID:\n\t\t\t\t\t\tdependency.deferred.resolve(context);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdemand(MODULE_PREFIX_HANDLER + dependency.type)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(handler) {\n\t\t\t\t\t\t\tdependency.handler = handler;\n\n\t\t\t\t\t\t\tsingletonCache.get(dependency);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tdependency.deferred.reject(new ClassFailure(ERROR_LOAD + ' (handler)', self.path));\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn dependency;\n\t};\n\n\treturn ClassDependency;\n}());","/* global\n\tglobal, document, demand, provide, queue, processor, settings,\n\tEVENT_PRE_REQUEST, EVENT_POST_REQUEST,\n\tregexMatchSourcemap, regexIsAbsoluteUri,\n\tfunctionResolveUrl\n*/\n\nvar handlerModule = (function() {\n\tvar target         = document.getElementsByTagName('head')[0],\n\t\tresolver       = document.createElement('a'),\n\t\tregexMatchType = /^(application|text)\\/(x-)?javascript/;\n\t\t\n\tdemand\n\t\t.on(EVENT_PRE_REQUEST + ':module', function(dependency) {\n\t\t\tvar url = dependency.url;\n\n\t\t\tdependency.url = url.slice(-3) !== '.js' ? url + '.js' : url;\n\t\t})\n\t\t.on(EVENT_POST_REQUEST + ':module', function(dependency) {\n\t\t\tvar match, replacement;\n\t\t\t\t\n\t\t\twhile(match = regexMatchSourcemap.exec(dependency.source)) {\n\t\t\t\tif(regexIsAbsoluteUri.test(match[1])) {\n\t\t\t\t\tresolver.href = self.url;\n\t\t\t\t\t\t\n\t\t\t\t\treplacement = resolver.protocol + '//' + resolver.host + match[1];\n\t\t\t\t} else {\n\t\t\t\t\treplacement = functionResolveUrl(self.url + '/../' + match[1]);\n\t\t\t\t}\n\n\t\t\t\tdependency.source = dependency.source.replace(match[0], '//# sourceMappingURL=' + replacement + '.map');\n\t\t\t}\n\t\t});\n\t\t\n\treturn {\n\t\tvalidate: function(type) {\n\t\t\treturn regexMatchType.test(type);\n\t\t},\n\t\tprocess: function(path, source) {\n\t\t\tvar script;\n\t\t\t\t\n\t\t\tscript       = document.createElement('script');\n\t\t\tscript.async = true;\n\t\t\tscript.text  = source;\n\t\t\t\t\t\n\t\t\tscript.setAttribute('demand-path', path);\n\t\t\t\t\t\n\t\t\ttarget.appendChild(script);\n\t\t}\n\t};\n}());"]}